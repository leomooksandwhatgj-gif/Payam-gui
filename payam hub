-- Payam Hub | Fluent UI Script Hub

local Fluent = loadstring(game:HttpGet(
    "https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"
))()

local SaveManager = loadstring(game:HttpGet(
    "https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"
))()

local InterfaceManager = loadstring(game:HttpGet(
    "https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"
))()

-- Window
local Window = Fluent:CreateWindow({
    Title = "Payam Hub",
    SubTitle = "Universal Script Hub",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.RightControl
})

-- Tabs
local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "home" }),
    Player = Window:AddTab({ Title = "Player", Icon = "user" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}


------------------------------------------------
-- PLAYER TAB CONTROLS
------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TextChatService = game:GetService("TextChatService")

local LocalPlayer = Players.LocalPlayer

-- STATES
local WS_Enabled = false
local JP_Enabled = false
local Noclip_Enabled = false
local AntiAFKEnabled = false

local WalkSpeedValue = 16
local JumpPowerValue = 50

------------------------------------------------
-- SECTIONS
------------------------------------------------
local MovementSection = Tabs.Player:AddSection("Movement")
local UtilitySection = Tabs.Player:AddSection("Utility")
local AntiAFKSection = Tabs.Player:AddSection("Anti AFK")

------------------------------------------------
-- WALK SPEED
------------------------------------------------
MovementSection:AddToggle("WalkSpeedToggle", {
    Title = "Walk Speed",
    Default = false
}):OnChanged(function(v)
    WS_Enabled = v
end)

MovementSection:AddSlider("WalkSpeedSlider", {
    Title = "Speed",
    Min = 1,
    Max = 200,
    Default = 16,
    Rounding = 0
}):OnChanged(function(v)
    WalkSpeedValue = v
end)

------------------------------------------------
-- JUMP POWER
------------------------------------------------
MovementSection:AddToggle("JumpPowerToggle", {
    Title = "Jump Power",
    Default = false
}):OnChanged(function(v)
    JP_Enabled = v
end)

MovementSection:AddSlider("JumpPowerSlider", {
    Title = "Power",
    Min = 1,
    Max = 200,
    Default = 50,
    Rounding = 0
}):OnChanged(function(v)
    JumpPowerValue = v
end)

------------------------------------------------
-- NOCLIP
------------------------------------------------
UtilitySection:AddToggle("NoclipToggle", {
    Title = "Noclip",
    Default = false
}):OnChanged(function(v)
    Noclip_Enabled = v
end)

------------------------------------------------
-- APPLY MOVEMENT + NOCLIP
------------------------------------------------
RunService.Stepped:Connect(function()
    local char = LocalPlayer.Character
    if not char then return end

    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum then
        if WS_Enabled then
            hum.WalkSpeed = WalkSpeedValue
        end
        if JP_Enabled then
            hum.JumpPower = JumpPowerValue
        end
    end

    if Noclip_Enabled then
        for _, part in ipairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

------------------------------------------------
-- TRUE WALK ANTI-AFK (MoveTo METHOD)
------------------------------------------------
local MoveCooldown = 0
local ChatCooldown = 0
local TargetPos = nil

AntiAFKSection:AddToggle("AntiAFKToggle", {
    Title = "Anti AFK Bot (REAL WALK)",
    Default = false
}):OnChanged(function(v)
    AntiAFKEnabled = v
end)

local WalkOffsets = {
    Vector3.new(8,0,0),
    Vector3.new(-8,0,0),
    Vector3.new(0,0,8),
    Vector3.new(0,0,-8),
}

RunService.Heartbeat:Connect(function()
    if not AntiAFKEnabled then return end

    local char = LocalPlayer.Character
    if not char then return end

    local hum = char:FindFirstChildOfClass("Humanoid")
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hum or not hrp then return end

    local now = tick()

    -- MOVE
    if now >= MoveCooldown then
        MoveCooldown = now + 1
        local offset = WalkOffsets[math.random(1, #WalkOffsets)]
        TargetPos = hrp.Position + offset
        hum:MoveTo(TargetPos)
    end

    -- RANDOM JUMP
    if math.random(1, 120) == 1 then
        hum.Jump = true
    end

    -- SAFE CHAT
    if now >= ChatCooldown then
        ChatCooldown = now + 60
        local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
        if channel then
            channel:SendAsync("donate payam 10")
        end
    end
end)

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    TargetPos = nil
end)


------------------------------------------------
-- MAIN TAB INFORMATION
------------------------------------------------
Tabs.Main:AddParagraph({
    Title = "Payam Hub",
    Content = [[
Payam Hub is a universal Roblox script hub designed for smooth gameplay,
clean UI, and human-like automation.

‚Ä¢ Built using Fluent UI
‚Ä¢ Safe movement-based Anti-AFK system
‚Ä¢ Player utilities: Speed, Jump, Noclip
‚Ä¢ Config saving & theme support
‚Ä¢ Universal ‚Äì works in most games

Created for learning, testing, and quality gameplay enhancement.
Enjoy and stay safe.
    ]]
})

------------------------------------------------
-- ADD SCRIPTS TAB
------------------------------------------------
Tabs.Scripts = Window:AddTab({
    Title = "Scripts",
    Icon = "code"
})

------------------------------------------------
-- SCRIPTS TAB : UNIVERSAL
------------------------------------------------
local UniversalSection = Tabs.Scripts:AddSection("Universal Scripts")

-- 1Ô∏è‚É£ XVC Hub
UniversalSection:AddButton({
    Title = "XVC Hub",
    Description = "Universal Script Hub",
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/Piw5bqGq"))()
    end
})


------------------------------------------------
-- SCRIPTS TAB : FLING GUI
------------------------------------------------
local FlingSection = Tabs.Scripts:AddSection("Fling GUI")

-- 1Ô∏è‚É£ Ultimate Fling GUI
FlingSection:AddButton({
    Title = "Ultimate Fling GUI",
    Description = "Powerful fling system",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/K1LAS1K/Ultimate-Fling-GUI/main/flingscript.lua"
        ))()
    end
})

-- 2Ô∏è‚É£ AFK Fling GUI
FlingSection:AddButton({
    Title = "AFK Fling GUI",
    Description = "Auto fling with GUI",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/nucax/afk-fling-script-roblox-gui/refs/heads/main/fling.lua"
        ))()
    end
})

-- 3Ô∏è‚É£ Natural Disaster Fling V2
FlingSection:AddButton({
    Title = "Natural Disaster Fling V2",
    Description = "Popular fling for disaster/survival games",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/GoldenCheats/natural-disaster-script/refs/heads/main/NATURAL%20DISASTER%20FLING%20V2"
        ))()
    end
})


------------------------------------------------
-- SCRIPTS TAB : MAIN SECTION
------------------------------------------------
local MainScriptsSection = Tabs.Scripts:AddSection("Main Scripts")

MainScriptsSection:AddButton({
    Title = "RGB Keyboard",
    Description = "RGB keyboard",
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/GJAi83pE"))()
    end
})

MainScriptsSection:AddButton({
    Title = "FE Sandevistan V6",
    Description = "Cyberpunk speed / time effect (FE)",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/mahowaga51-cmd/FE-Scripts/refs/heads/main/FE%20Sandevistan%20V6"
        ))()
    end
})


MainScriptsSection:AddButton({
    Title = "Invisible (FE)",
    Description = "Make your character invisible",
    Callback = function()
        loadstring(game:HttpGet("https://pastebin.com/raw/3Rnd9rHf"))()
    end
})


MainScriptsSection:AddButton({
    Title = "AK47 (FE)",
    Description = "FE AK47 weapon script",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/sinret/rbxscript.com-scripts-reuploads-/main/ak47",
            true
        ))()
    end
})

MainScriptsSection:AddButton({
    Title = "Anti AFK (ZX)",
    Description = "Prevents AFK kick automatically",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/zxkiuby/Anti-Afk-Roblox/refs/heads/main/ZXAnti%20Afk%20Roblox.lua"
        ))()
    end
})


-- 1Ô∏è‚É£ Cacu Loader
MainScriptsSection:AddButton({
    Title = "Cacu Loader",
    Description = "Universal script loader",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/918281/Cacu/refs/heads/main/Loader.lua"
        ))()
    end
})

-- 2Ô∏è‚É£ OP Fly GUI (Main)
MainScriptsSection:AddButton({
    Title = "OP Fly GUI",
    Description = "Advanced fly GUI (unverified)",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/fhrdimybds-byte/OP-FLY-GUI-/refs/heads/main/Lua"
        ))()
    end
})

------------------------------------------------
-- SCRIPTS TAB : COMBO
------------------------------------------------
local ComboSection = Tabs.Scripts:AddSection("Combo")

-- Silent Aim
ComboSection:AddButton({
    Title = "Silent Aim",
    Description = "Silent aim combo script",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/nicos0509thehoi-max/azov/refs/heads/main/silent"
        ))()
    end
})

-- Aimbot (Luarmor)
ComboSection:AddButton({
    Title = "Aimbot",
    Description = "Advanced aimbot (Luarmor)",
    Callback = function()
        loadstring(game:HttpGet(
            "https://api.luarmor.net/files/v4/loaders/583f18c4b97447fe504873ff5fb47b30.lua"
        ))()
    end
})



------------------------------------------------
-- PLAYER TAB : HITBOX (FIXED - NO NOTIFY ON OFF)
------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- GLOBALS
_G.HeadSize = 50
_G.Disabled = false

local HitboxSection = Tabs.Player:AddSection("Hitbox")

-- Toggle
HitboxSection:AddToggle("HitboxToggle", {
    Title = "Hitbox Expander",
    Default = false
}):OnChanged(function(v)
    if not v then  -- OFF ‚Üí RESET SILENTLY
        for _, plr in next, Players:GetPlayers() do
            if plr ~= LocalPlayer and plr.Character then
                pcall(function()
                    local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        hrp.Size = Vector3.new(2, 2, 1)       -- default Roblox size
                        hrp.Transparency = 1                   -- invisible again
                        hrp.CanCollide = false
                        hrp.Material = Enum.Material.Plastic   -- default
                        hrp.BrickColor = BrickColor.new("Medium stone grey") -- default-ish
                    end
                end)
            end
        end
    end
    _G.Disabled = v
end)

-- Size slider
HitboxSection:AddSlider("HitboxSizeSlider", {
    Title = "Hitbox Size",
    Min = 5,
    Max = 100,
    Default = 50,
    Rounding = 0
}):OnChanged(function(v)
    _G.HeadSize = v
end)

-- Main loop (only runs when enabled)
RunService.RenderStepped:Connect(function()
    if not _G.Disabled then return end

    for _, v in next, Players:GetPlayers() do
        if v ~= LocalPlayer and v.Character then
            pcall(function()
                local hrp = v.Character:FindFirstChild("HumanoidRootPart")
                if hrp then
                    hrp.Size = Vector3.new(_G.HeadSize, _G.HeadSize, _G.HeadSize)
                    hrp.Transparency = 0.7
                    hrp.BrickColor = BrickColor.new("Really blue")
                    hrp.Material = Enum.Material.Neon
                    hrp.CanCollide = false
                end
            end)
        end
    end
end)


------------------------------------------------
-- MAIN TAB : PLAYER INFO (LIVE)
------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")

local LocalPlayer = Players.LocalPlayer

local InfoSection = Tabs.Main:AddSection("Player Information")

-- USER INFO (with Account Age)
local UserLabel = InfoSection:AddParagraph({
    Title = "User",
    Content = "Loading..."
})

UserLabel:SetDesc(
    "Username: " .. LocalPlayer.Name ..
    "\nUser ID: " .. LocalPlayer.UserId ..
    "\nAccount Age: " .. LocalPlayer.AccountAge .. " days"
)

-- GAME INFO
local GameLabel = InfoSection:AddParagraph({
    Title = "Game",
    Content = "Loading..."
})

GameLabel:SetDesc(
    "Game ID: " .. game.PlaceId
)

-- PERFORMANCE INFO
local PerfLabel = InfoSection:AddParagraph({
    Title = "Performance",
    Content = "Loading..."
})

------------------------------------------------
-- FPS / PING / MEMORY (LIVE)
------------------------------------------------
local fps = 0
local frames = 0
local lastTime = tick()

RunService.RenderStepped:Connect(function()
    frames += 1
    if tick() - lastTime >= 1 then
        fps = frames
        frames = 0
        lastTime = tick()

        local ping = math.floor(
            Stats.Network.ServerStatsItem["Data Ping"]:GetValue()
        )

        local memory = math.floor(
            Stats:GetTotalMemoryUsageMb()
        )

        PerfLabel:SetDesc(
            "FPS: " .. fps ..
            "\nPing: " .. ping .. " ms" ..
            "\nMemory: " .. memory .. " MB"
        )
    end
end)


------------------------------------------------
-- SCRIPTS TAB : ANIMATION
------------------------------------------------
local AnimationSection = Tabs.Scripts:AddSection("Animation")

-- 1Ô∏è‚É£ Animation Hub
AnimationSection:AddButton({
    Title = "Animation Hub",
    Description = "Universal animation hub",
    Callback = function()
        loadstring(game:HttpGet(
            "https://kbauu.neocities.org/animation-hub"
        ))()
    end
})

-- 2Ô∏è‚É£ R4D Revamp
AnimationSection:AddButton({
    Title = "R4D Revamp",
    Description = "Advanced animation & movement",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/M1ZZ001/R4D-Revamp/refs/heads/main/Official%20R4D%20Revamp"
        ))()
    end
})

-- 3Ô∏è‚É£ Source Movement
AnimationSection:AddButton({
    Title = "Source Movement",
    Description = "Source-style movement animations",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/Gorinch/Source-movement-in-roblox/refs/heads/main/Main.lua"
        ))()
    end
})

-- 4Ô∏è‚É£ Sonic X Super (R15)
AnimationSection:AddButton({
    Title = "Sonic X Super",
    Description = "FE R15 Sonic animation",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/Azizanzz0/FE-R15-Sonic-X-Super/refs/heads/main/Protected%20SonicXSuper.txt"
        ))()
    end
})

-- 5Ô∏è‚É£ Custom Animation Pack
AnimationSection:AddButton({
    Title = "Custom Animation Pack",
    Description = "Pastebin animation script",
    Callback = function()
        loadstring(game:HttpGet(
            "https://pastebin.com/raw/Y1MkBRn3"
        ))()
    end
})

-- 6Ô∏è‚É£ Emotes GUI
AnimationSection:AddButton({
    Title = "Emotes GUI",
    Description = "Emotes & animation GUI",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/7yd7/Hub/refs/heads/Branch/GUIS/Emotes.lua"
        ))()
    end
})

------------------------------------------------
-- VANISH TAB (VISUAL FEATURES)
------------------------------------------------
Tabs.Vanish = Window:AddTab({
    Title = "Vanish",
    Icon = "eye"
})

local Lighting = game:GetService("Lighting")

-- STORE ORIGINAL VALUES
local OriginalSettings = {
    Brightness = Lighting.Brightness,
    ClockTime = Lighting.ClockTime,
    FogEnd = Lighting.FogEnd,
    GlobalShadows = Lighting.GlobalShadows,
    Ambient = Lighting.Ambient,
    OutdoorAmbient = Lighting.OutdoorAmbient
}

------------------------------------------------
-- DAY / NIGHT
------------------------------------------------
local TimeSection = Tabs.Vanish:AddSection("Time")

TimeSection:AddButton({
    Title = "Day",
    Description = "Set daytime",
    Callback = function()
        Lighting.ClockTime = 14
    end
})

TimeSection:AddButton({
    Title = "Night",
    Description = "Set nighttime",
    Callback = function()
        Lighting.ClockTime = 0
    end
})

------------------------------------------------
-- SHADOW CONTROL
------------------------------------------------
local ShadowSection = Tabs.Vanish:AddSection("Shadows")

ShadowSection:AddToggle("NoShadowToggle", {
    Title = "No Shadows",
    Default = false
}):OnChanged(function(v)
    Lighting.GlobalShadows = not v
end)

------------------------------------------------
-- FULL BRIGHT
------------------------------------------------
local BrightSection = Tabs.Vanish:AddSection("Brightness")

local FullBrightEnabled = false

BrightSection:AddToggle("FullBrightToggle", {
    Title = "Full Bright",
    Default = false
}):OnChanged(function(v)
    FullBrightEnabled = v

    if v then
        Lighting.Brightness = 3
        Lighting.ClockTime = 14
        Lighting.FogEnd = 100000
        Lighting.GlobalShadows = false
        Lighting.Ambient = Color3.new(1,1,1)
        Lighting.OutdoorAmbient = Color3.new(1,1,1)
    else
        -- RESTORE ORIGINAL
        Lighting.Brightness = OriginalSettings.Brightness
        Lighting.ClockTime = OriginalSettings.ClockTime
        Lighting.FogEnd = OriginalSettings.FogEnd
        Lighting.GlobalShadows = OriginalSettings.GlobalShadows
        Lighting.Ambient = OriginalSettings.Ambient
        Lighting.OutdoorAmbient = OriginalSettings.OutdoorAmbient
    end
end)



------------------------------------------------
-- VANISH TAB : FOG + ZOOM
------------------------------------------------
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local LocalPlayer = Players.LocalPlayer

------------------------------------------------
-- FOG REMOVE
------------------------------------------------
local FogSection = Tabs.Vanish:AddSection("Fog")

local OriginalFogEnd = Lighting.FogEnd

FogSection:AddToggle("NoFogToggle", {
    Title = "Remove Fog",
    Default = false
}):OnChanged(function(v)
    if v then
        Lighting.FogEnd = 1000000
    else
        Lighting.FogEnd = OriginalFogEnd
    end
end)

------------------------------------------------
-- INFINITE ZOOM
------------------------------------------------
local ZoomSection = Tabs.Vanish:AddSection("Camera")

local PlayerCamera = workspace.CurrentCamera
local OriginalMinZoom = LocalPlayer.CameraMinZoomDistance
local OriginalMaxZoom = LocalPlayer.CameraMaxZoomDistance

ZoomSection:AddToggle("InfZoomToggle", {
    Title = "Infinite Zoom",
    Default = false
}):OnChanged(function(v)
    if v then
        LocalPlayer.CameraMinZoomDistance = 0.5
        LocalPlayer.CameraMaxZoomDistance = 100000
    else
        LocalPlayer.CameraMinZoomDistance = OriginalMinZoom
        LocalPlayer.CameraMaxZoomDistance = OriginalMaxZoom
    end
end)


------------------------------------------------
-- SCRIPTS TAB : BYPASS
------------------------------------------------
local BypassSection = Tabs.Scripts:AddSection("Bypass")

-- 1Ô∏è‚É£ Luarmor Bypass Loader
BypassSection:AddButton({
    Title = "Luarmor Bypass",
    Description = "Loader bypass (use at your own risk)",
    Callback = function()
        loadstring(game:HttpGet(
            "https://api.luarmor.net/files/v3/loaders/a675d4a69c2e1d8e301a4af260fb719b.lua"
        ))()
    end
})

-- 2Ô∏è‚É£ FE Chat Translator GUI
BypassSection:AddButton({
    Title = "FE Chat Translator",
    Description = "Translate chat messages (FE)",
    Callback = function()
        loadstring(game:HttpGet(
            "https://pastebin.com/raw/dHAK13sf"
        ))()
    end
})

-- 3Ô∏è‚É£ Chat Bypass 2023 (AnnaBypasser)
BypassSection:AddButton({
    Title = "Chat Bypass 2023",
    Description = "Advanced FE chat bypass",
    Callback = function()
        loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/AnnaRoblox/AnnaBypasser/refs/heads/main/AnnaBypasser.lua",
            true
        ))()
    end
})

-- 4Ô∏è‚É£ NEW - AKADMIN (your request)
BypassSection:AddButton({
    Title = "AKADMIN",
    Description = "powerful admin / bypass script",
    Callback = function()
        loadstring(game:HttpGet("https://absent.wtf/AKADMIN.lua"))()
    end
})


------------------------------------------------
-- VANISH TAB : X-RAY
------------------------------------------------
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

local XRaySection = Tabs.Vanish:AddSection("X-Ray")

local XRayEnabled = false
local OriginalTransparency = {}

XRaySection:AddToggle("XRayToggle", {
    Title = "X-Ray",
    Default = false
}):OnChanged(function(v)
    XRayEnabled = v

    for _, obj in ipairs(Workspace:GetDescendants()) do
        if obj:IsA("BasePart") and not obj:IsDescendantOf(Players.LocalPlayer.Character) then
            if v then
                -- save original transparency
                if OriginalTransparency[obj] == nil then
                    OriginalTransparency[obj] = obj.Transparency
                end
                obj.Transparency = 0.7
            else
                -- restore transparency
                if OriginalTransparency[obj] ~= nil then
                    obj.Transparency = OriginalTransparency[obj]
                end
            end
        end
    end

    if not v then
        table.clear(OriginalTransparency)
    end
end)

------------------------------------------------
-- VANISH TAB : CAMERA FOV
------------------------------------------------
local Camera = workspace.CurrentCamera

local FOVSection = Tabs.Vanish:AddSection("Camera FOV")

local DefaultFOV = Camera.FieldOfView

FOVSection:AddSlider("FOVSlider", {
    Title = "Camera FOV",
    Description = "Change camera field of view",
    Min = 40,
    Max = 120,
    Default = DefaultFOV,
    Rounding = 0
}):OnChanged(function(v)
    Camera.FieldOfView = v
end)

-- Reset FOV when character respawns
game:GetService("Players").LocalPlayer.CharacterAdded:Connect(function()
    task.wait(1)
    Camera.FieldOfView = DefaultFOV
end)


------------------------------------------------
-- SERVER CONTROLS (MAIN TAB)
------------------------------------------------
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local ServerSection = Tabs.Main:AddSection("Server Controls")

-- REJOIN BUTTON
ServerSection:AddButton({
    Title = "Rejoin Server",
    Description = "Reconnects you to this same server",
    Callback = function()
        Window:Dialog({
            Title = "Rejoin",
            Content = "Are you sure you want to rejoin this server?",
            Buttons = {
                {
                    Title = "Confirm",
                    Callback = function()
                        TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
                    end
                },
                {
                    Title = "Cancel"
                }
            }
        })
    end
})

-- SERVER HOPPER (Join Different Server)
ServerSection:AddButton({
    Title = "Server Hopper",
    Description = "Join a different public server",
    Callback = function()
        local api = "https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"
        local success, result = pcall(function() 
            return HttpService:JSONDecode(game:HttpGet(api)) 
        end)
        
        if success then
            for _, server in ipairs(result.data) do
                if server.playing < server.maxPlayers and server.id ~= game.JobId then
                    TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, LocalPlayer)
                    break
                end
            end
        else
            Fluent:Notify({
                Title = "Error",
                Content = "Failed to find a new server.",
                Duration = 5
            })
        end
    end
})

-- LEAVE BUTTON
ServerSection:AddButton({
    Title = "Leave Game",
    Description = "Instantly closes the game",
    Callback = function()
        Window:Dialog({
            Title = "Leave Game",
            Content = "Are you sure you want to quit?",
            Buttons = {
                {
                    Title = "Yes, Leave",
                    Callback = function()
                        game:Shutdown()
                    end
                },
                {
                    Title = "Stay"
                }
            }
        })
    end
})


------------------------------------------------
-- VANISH TAB : NIGHT VISION (GREEN)
------------------------------------------------
local Lighting = game:GetService("Lighting")

local NightVisionSection = Tabs.Vanish:AddSection("Night Vision")

-- SAVE ORIGINAL
local NV_Original = {
    Brightness = Lighting.Brightness,
    ClockTime = Lighting.ClockTime,
    FogEnd = Lighting.FogEnd,
    GlobalShadows = Lighting.GlobalShadows,
    Ambient = Lighting.Ambient,
    OutdoorAmbient = Lighting.OutdoorAmbient
}

-- EFFECTS
local ColorEffect = Instance.new("ColorCorrectionEffect")
ColorEffect.Name = "NightVision_Color"
ColorEffect.Enabled = false
ColorEffect.TintColor = Color3.fromRGB(120, 255, 120)
ColorEffect.Contrast = 0.2
ColorEffect.Saturation = -0.3
ColorEffect.Parent = Lighting

local Bloom = Instance.new("BloomEffect")
Bloom.Name = "NightVision_Bloom"
Bloom.Enabled = false
Bloom.Intensity = 0.8
Bloom.Size = 56
Bloom.Threshold = 0.2
Bloom.Parent = Lighting

------------------------------------------------
-- TOGGLE
------------------------------------------------
NightVisionSection:AddToggle("NightVisionToggle", {
    Title = "Night Vision (Green)",
    Default = false
}):OnChanged(function(v)
    if v then
        -- ENABLE NIGHT VISION
        Lighting.Brightness = 3
        Lighting.ClockTime = 1
        Lighting.FogEnd = 100000
        Lighting.GlobalShadows = false
        Lighting.Ambient = Color3.fromRGB(90, 255, 90)
        Lighting.OutdoorAmbient = Color3.fromRGB(90, 255, 90)

        ColorEffect.Enabled = true
        Bloom.Enabled = true
    else
        -- RESTORE ORIGINAL
        Lighting.Brightness = NV_Original.Brightness
        Lighting.ClockTime = NV_Original.ClockTime
        Lighting.FogEnd = NV_Original.FogEnd
        Lighting.GlobalShadows = NV_Original.GlobalShadows
        Lighting.Ambient = NV_Original.Ambient
        Lighting.OutdoorAmbient = NV_Original.OutdoorAmbient

        ColorEffect.Enabled = false
        Bloom.Enabled = false
    end
end)


------------------------------------------------
-- PLAYER TAB : TP WALK (NO KEY)
------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer

local TPWalkSection = Tabs.Player:AddSection("TP Walk")

------------------------------------------------
-- STATE
------------------------------------------------
local TPWalkEnabled = false
local TPSpeed = 2

------------------------------------------------
-- TOGGLE (ONLY UI)
------------------------------------------------
TPWalkSection:AddToggle("TPWalkToggle", {
    Title = "TP Walk",
    Default = false
}):OnChanged(function(v)
    TPWalkEnabled = v
end)

------------------------------------------------
-- SPEED SLIDER
------------------------------------------------
TPWalkSection:AddSlider("TPWalkSpeed", {
    Title = "TP Speed",
    Min = 0.5,
    Max = 10,
    Default = 2,
    Rounding = 1
}):OnChanged(function(v)
    TPSpeed = v
end)

------------------------------------------------
-- TP WALK LOOP
------------------------------------------------
RunService.RenderStepped:Connect(function()
    if not TPWalkEnabled then return end

    local char = LocalPlayer.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    local hum = char and char:FindFirstChildOfClass("Humanoid")

    if not hrp or not hum then return end
    if hum.MoveDirection.Magnitude == 0 then return end

    hrp.CFrame = hrp.CFrame + (hum.MoveDirection * TPSpeed)
end)


------------------------------------------------
-- MODEL SCRIPTS TAB - 36 COMMANDS + BEAUTIFUL GUI
------------------------------------------------
Tabs.ModelScripts = Window:AddTab({
    Title = "admin payam hub",
    Icon = "box"
})

local ChatSection = Tabs.ModelScripts:AddSection("Self Chat Commands")

local ChatAdminEnabled = false
local Prefix = "."

-- Toggle states
local Noclip_Enabled = false
local FlyEnabled = false
local FlyBodyVelocity = nil
local FlyConnection = nil
local InfJumpEnabled = false
local SpinEnabled = false
local Platform = nil
local GodEnabled = false
local OriginalHealth = 100

local HelpParagraph

local function UpdateHelp()
    if HelpParagraph then
        HelpParagraph:SetDesc([[
**Commands** (type in chat):

]]..Prefix..[[speed <num>     unspeed
]]..Prefix..[[jump <num>      unjump
]]..Prefix..[[tp <name>
]]..Prefix..[[noclip           clip
]]..Prefix..[[fly              unfly
]]..Prefix..[[god              ungod
]]..Prefix..[[invisible        visible
]]..Prefix..[[sit              stand
]]..Prefix..[[platform         unplatform
]]..Prefix..[[infjump          uninfjump
]]..Prefix..[[spin             unspin
]]..Prefix..[[gravity <num>    normalgravity
]]..Prefix..[[hipheight <num>  normalhip
]]..Prefix..[[highjump         lowjump
]]..Prefix..[[fov <num>
]]..Prefix..[[fullbright
]]..Prefix..[[rejoin
]]..Prefix..[[reset
]]..Prefix..[[cmds             ‚Üí Open full GUI list

Change prefix above ‚Üë
Only your messages
        ]])
    end
end

-- Toggle
ChatSection:AddToggle("ChatAdminToggle", {
    Title = "Enable Chat Commands",
    Default = false
}):OnChanged(function(v)
    ChatAdminEnabled = v
    Fluent:Notify({
        Title = "Chat Admin",
        Content = v and ("ON - Prefix: " .. Prefix) or "OFF",
        Duration = 4
    })
end)

-- Prefix changer
ChatSection:AddInput("PrefixInput", {
    Title = "Command Prefix",
    Default = ".",
    Placeholder = "Example: ! or / or #",
    Callback = function(v)
        if v and v ~= "" then
            Prefix = v
            Fluent:Notify({Title = "Prefix Changed", Content = "Now using: " .. Prefix, Duration = 3.5})
            UpdateHelp()
        end
    end
})

HelpParagraph = ChatSection:AddParagraph({
    Title = "Available Commands",
    Content = "Loading..."
})
UpdateHelp()

-- Helpers
local function getHum() return LocalPlayer.Character and LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid") end
local function getRoot() return LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") end

-- SMOOTH FLY (PC + Mobile)
local function ToggleFly()
    FlyEnabled = not FlyEnabled
    local root = getRoot()
    if not root then return end

    if FlyEnabled then
        if FlyBodyVelocity then FlyBodyVelocity:Destroy() end
        if FlyConnection then FlyConnection:Disconnect() end

        FlyBodyVelocity = Instance.new("BodyVelocity")
        FlyBodyVelocity.Name = "PayamFly"
        FlyBodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
        FlyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
        FlyBodyVelocity.Parent = root

        FlyConnection = RunService.Heartbeat:Connect(function()
            if not FlyEnabled then return end
            local hum = getHum()
            if not hum then return end
            local dir = hum.MoveDirection * 110
            local up = game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.Space) and 70 or 0
            local down = game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.LeftControl) and -70 or 0
            FlyBodyVelocity.Velocity = dir + Vector3.new(0, up + down, 0)
        end)
        Fluent:Notify({Title = "Fly", Content = "‚úÖ ENABLED (smooth PC + Mobile)", Duration = 4})
    else
        if FlyConnection then FlyConnection:Disconnect() end
        if FlyBodyVelocity then FlyBodyVelocity:Destroy() end
        Fluent:Notify({Title = "Fly", Content = "‚ùå DISABLED", Duration = 3})
    end
end

-- BEAUTIFUL GUI
local function ShowCommandsGUI()
    local screen = Instance.new("ScreenGui")
    screen.Name = "PayamCommandsGUI"
    screen.ResetOnSpawn = false
    screen.Parent = game.CoreGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 480, 0, 580)
    frame.Position = UDim2.new(0.5, -240, 0.5, -290)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    frame.BorderSizePixel = 0
    frame.Active = true
    frame.Draggable = true
    frame.Parent = screen

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 16)
    corner.Parent = frame

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 60)
    title.BackgroundTransparency = 1
    title.Text = "üíé Payam Hub - All 36 Commands"
    title.TextColor3 = Color3.new(1,1,1)
    title.TextSize = 26
    title.Font = Enum.Font.GothamBold
    title.Parent = frame

    local close = Instance.new("TextButton")
    close.Size = UDim2.new(0, 50, 0, 50)
    close.Position = UDim2.new(1, -55, 0, 5)
    close.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
    close.Text = "‚úï"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextSize = 28
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner", close).CornerRadius = UDim.new(0, 12)
    close.MouseButton1Click:Connect(function() screen:Destroy() end)

    local scroll = Instance.new("ScrollingFrame")
    scroll.Size = UDim2.new(1, -24, 1, -80)
    scroll.Position = UDim2.new(0, 12, 0, 70)
    scroll.BackgroundTransparency = 1
    scroll.ScrollBarThickness = 8
    scroll.Parent = frame

    local layout = Instance.new("UIListLayout")
    layout.Padding = UDim.new(0, 12)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Parent = scroll

    local cmdList = {
        {Prefix.."speed <num>", "Set WalkSpeed"}, {Prefix.."unspeed", "Reset WalkSpeed"},
        {Prefix.."jump <num>", "Set JumpPower"}, {Prefix.."unjump", "Reset JumpPower"},
        {Prefix.."tp <name>", "Teleport to player"},
        {Prefix.."noclip", "Enable Noclip"}, {Prefix.."clip", "Disable Noclip"},
        {Prefix.."fly", "Enable Fly"}, {Prefix.."unfly", "Disable Fly"},
        {Prefix.."god", "Infinite Health"}, {Prefix.."ungod", "Disable God"},
        {Prefix.."invisible", "Become Invisible"}, {Prefix.."visible", "Become Visible"},
        {Prefix.."sit", "Sit Down"}, {Prefix.."stand", "Stand Up"},
        {Prefix.."platform", "Create Platform"}, {Prefix.."unplatform", "Remove Platform"},
        {Prefix.."infjump", "Infinite Jump"}, {Prefix.."uninfjump", "Disable Inf Jump"},
        {Prefix.."spin", "Spin Character"}, {Prefix.."unspin", "Stop Spinning"},
        {Prefix.."gravity <num>", "Set Gravity"}, {Prefix.."normalgravity", "Reset Gravity"},
        {Prefix.."hipheight <num>", "Set HipHeight"}, {Prefix.."normalhip", "Reset HipHeight"},
        {Prefix.."highjump", "Super Jump"}, {Prefix.."lowjump", "Low Jump"},
        {Prefix.."fov <num>", "Set FOV"}, {Prefix.."fullbright", "Full Bright"},
        {Prefix.."rejoin", "Rejoin Server"}, {Prefix.."reset", "Reset Character"},
        {Prefix.."cmds", "Show this GUI"}
    }

    for _, v in ipairs(cmdList) do
        local f = Instance.new("Frame")
        f.Size = UDim2.new(1, 0, 0, 80)
        f.BackgroundColor3 = Color3.fromRGB(40, 40, 52)
        f.BorderSizePixel = 0
        f.Parent = scroll
        Instance.new("UICorner", f).CornerRadius = UDim.new(0, 12)

        local lbl1 = Instance.new("TextLabel")
        lbl1.Size = UDim2.new(1, -24, 0.5, 0)
        lbl1.Position = UDim2.new(0, 12, 0, 8)
        lbl1.BackgroundTransparency = 1
        lbl1.Text = v[1]
        lbl1.TextColor3 = Color3.fromRGB(120, 220, 255)
        lbl1.TextSize = 20
        lbl1.Font = Enum.Font.GothamBold
        lbl1.TextXAlignment = Enum.TextXAlignment.Left
        lbl1.Parent = f

        local lbl2 = Instance.new("TextLabel")
        lbl2.Size = UDim2.new(1, -24, 0.5, 0)
        lbl2.Position = UDim2.new(0, 12, 0.5, 0)
        lbl2.BackgroundTransparency = 1
        lbl2.Text = v[2]
        lbl2.TextColor3 = Color3.fromRGB(190, 190, 190)
        lbl2.TextSize = 16
        lbl2.Font = Enum.Font.Gotham
        lbl2.TextXAlignment = Enum.TextXAlignment.Left
        lbl2.TextWrapped = true
        lbl2.Parent = f
    end

    scroll.CanvasSize = UDim2.new(0, 0, 0, #cmdList * 92 + 20)
end

-- MAIN COMMAND PROCESSOR
local function processMessage(msg)
    if not ChatAdminEnabled then return end
    if msg.TextSource.UserId ~= LocalPlayer.UserId then return end

    local text = msg.Text:lower()
    local p = Prefix:lower()
    if not text:find("^" .. p) then return end

    local cmdText = text:sub(#p + 1):match("^%s*(.-)%s*$")
    local args = {}
    for w in cmdText:gmatch("%S+") do table.insert(args, w) end
    if #args == 0 then return end

    local cmd = args[1]
    local hum = getHum()
    local root = getRoot()

    -- SPEED
    if cmd == "speed" and args[2] then local n = tonumber(args[2]) if n and hum then hum.WalkSpeed = n Fluent:Notify({Title="Speed",Content="WalkSpeed = "..n,Duration=3}) end
    elseif cmd == "unspeed" then if hum then hum.WalkSpeed = 16 Fluent:Notify({Title="Speed",Content="Reset to 16",Duration=3}) end

    -- JUMP
    elseif cmd == "jump" and args[2] then local n = tonumber(args[2]) if n and hum then hum.JumpPower = n Fluent:Notify({Title="Jump",Content="JumpPower = "..n,Duration=3}) end
    elseif cmd == "unjump" then if hum then hum.JumpPower = 50 Fluent:Notify({Title="Jump",Content="Reset to 50",Duration=3}) end

    -- TP
    elseif cmd == "tp" and args[2] then
        if root then
            local q = args[2]:lower()
            for _, plr in Players:GetPlayers() do
                if plr ~= LocalPlayer and plr.Name:lower():find(q) then
                    local tr = plr.Character and plr.Character:FindFirstChild("HumanoidRootPart")
                    if tr then root.CFrame = tr.CFrame * CFrame.new(0,5,-6) Fluent:Notify({Title="Teleported",Content="‚Üí "..plr.Name,Duration=3}) end
                    break
                end
            end
        end

    -- NOCLIP
    elseif cmd == "noclip" then Noclip_Enabled = true Fluent:Notify({Title="Noclip",Content="‚úÖ ENABLED",Duration=3})
    elseif cmd == "clip" then Noclip_Enabled = false Fluent:Notify({Title="Noclip",Content="‚ùå DISABLED",Duration=3})

    -- FLY
    elseif cmd == "fly" then ToggleFly()
    elseif cmd == "unfly" then if FlyEnabled then ToggleFly() end

    -- GOD
    elseif cmd == "god" then
        GodEnabled = true
        if hum then OriginalHealth = hum.MaxHealth hum.MaxHealth = math.huge hum.Health = math.huge end
        Fluent:Notify({Title="Godmode",Content="‚úÖ ENABLED",Duration=4})
    elseif cmd == "ungod" then
        GodEnabled = false
        if hum then hum.MaxHealth = 100 hum.Health = 100 end
        Fluent:Notify({Title="Godmode",Content="‚ùå DISABLED",Duration=4})

    -- INVISIBLE
    elseif cmd == "invisible" then
        if LocalPlayer.Character then
            for _, v in LocalPlayer.Character:GetDescendants() do
                if v:IsA("BasePart") and v.Name ~= "HumanoidRootPart" then v.Transparency = 1 end
            end
        end
        Fluent:Notify({Title="Invisible",Content="‚úÖ ENABLED",Duration=3})
    elseif cmd == "visible" then
        if LocalPlayer.Character then
            for _, v in LocalPlayer.Character:GetDescendants() do
                if v:IsA("BasePart") then v.Transparency = 0 end
            end
        end
        Fluent:Notify({Title="Invisible",Content="‚ùå DISABLED",Duration=3})

    -- SIT / STAND
    elseif cmd == "sit" and hum then hum.Sit = true
    elseif cmd == "stand" and hum then hum.Sit = false

    -- PLATFORM
    elseif cmd == "platform" then
        if Platform then Platform:Destroy() end
        Platform = Instance.new("Part")
        Platform.Size = Vector3.new(10, 1, 10)
        Platform.Transparency = 0.5
        Platform.Anchored = true
        Platform.Color = Color3.fromRGB(0, 170, 255)
        Platform.CFrame = (root or getRoot()).CFrame * CFrame.new(0, -3.5, 0)
        Platform.Parent = workspace
        Fluent:Notify({Title="Platform",Content="‚úÖ Created",Duration=3})
    elseif cmd == "unplatform" then if Platform then Platform:Destroy() Platform = nil end Fluent:Notify({Title="Platform",Content="‚ùå Removed",Duration=3})

    -- INF JUMP
    elseif cmd == "infjump" then InfJumpEnabled = true Fluent:Notify({Title="Inf Jump",Content="‚úÖ ENABLED",Duration=3})
    elseif cmd == "uninfjump" then InfJumpEnabled = false Fluent:Notify({Title="Inf Jump",Content="‚ùå DISABLED",Duration=3})

    -- SPIN
    elseif cmd == "spin" then
        SpinEnabled = true
        if root then
            local bv = Instance.new("BodyAngularVelocity")
            bv.Name = "PayamSpin"
            bv.MaxTorque = Vector3.new(0, math.huge, 0)
            bv.AngularVelocity = Vector3.new(0, 30, 0)
            bv.Parent = root
        end
        Fluent:Notify({Title="Spin",Content="‚úÖ ENABLED",Duration=3})
    elseif cmd == "unspin" then
        SpinEnabled = false
        if root then local bv = root:FindFirstChild("PayamSpin") if bv then bv:Destroy() end end
        Fluent:Notify({Title="Spin",Content="‚ùå STOPPED",Duration=3})

    -- GRAVITY
    elseif cmd == "gravity" and args[2] then
        workspace.Gravity = tonumber(args[2]) or 196.2
        Fluent:Notify({Title="Gravity",Content="Set to "..workspace.Gravity,Duration=3})
    elseif cmd == "normalgravity" then workspace.Gravity = 196.2 Fluent:Notify({Title="Gravity",Content="Reset to normal",Duration=3})

    -- HIPHEIGHT
    elseif cmd == "hipheight" and args[2] and hum then hum.HipHeight = tonumber(args[2]) Fluent:Notify({Title="HipHeight",Content="Set to "..hum.HipHeight,Duration=3})
    elseif cmd == "normalhip" and hum then hum.HipHeight = 0 Fluent:Notify({Title="HipHeight",Content="Reset to normal",Duration=3})

    -- HIGH / LOW JUMP
    elseif cmd == "highjump" and hum then hum.JumpPower = 200 Fluent:Notify({Title="Jump",Content="High Jump ON",Duration=3})
    elseif cmd == "lowjump" and hum then hum.JumpPower = 20 Fluent:Notify({Title="Jump",Content="Low Jump ON",Duration=3})

    -- FOV
    elseif cmd == "fov" and args[2] then workspace.CurrentCamera.FieldOfView = tonumber(args[2]) or 70

    -- FULLBRIGHT
    elseif cmd == "fullbright" then
        local l = game:GetService("Lighting")
        l.Brightness = 3 l.ClockTime = 14 l.FogEnd = 100000 l.GlobalShadows = false
        Fluent:Notify({Title="Fullbright",Content="‚úÖ ENABLED",Duration=4})

    -- REJOIN
    elseif cmd == "rejoin" then
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)

    -- RESET
    elseif cmd == "reset" then
        local h = getHum()
        if h then h.Health = 0 end

    -- CMDS GUI
    elseif cmd == "cmds" then
        ShowCommandsGUI()
    end
end

-- LISTENER
task.spawn(function()
    if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
        local ch = TextChatService.TextChannels:WaitForChild("RBXGeneral", 10)
        if ch then ch.MessageReceived:Connect(processMessage) end
    else
        LocalPlayer.Chatted:Connect(function(m)
            processMessage({TextSource = {UserId = LocalPlayer.UserId}, Text = m})
        end)
    end
end)

-- Extra loops
RunService.Heartbeat:Connect(function()
    if InfJumpEnabled then
        local h = getHum()
        if h and h:GetState() == Enum.HumanoidStateType.Freefall then
            h:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
    if Noclip_Enabled then
        local char = LocalPlayer.Character
        if char then
            for _, part in ipairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
        end
    end
end)

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(2)
    if ChatAdminEnabled then
        Fluent:Notify({Title = "Respawn", Content = "All commands ready", Duration = 3})
    end
end)


------------------------------------------------
-- MUSIC TAB - PAYAM HUB STYLE (SOUND + MUCIC)
------------------------------------------------
Tabs.Music = Window:AddTab({
    Title = "Music",
    Icon = "music"  -- or "headphones" if Fluent supports
})

local Camera = workspace.CurrentCamera
local CurrentSound = nil
local CurrentVolume = 0.5

-- Helper: Play sound (local only, in camera)
local function PlayAudio(id, looped)
    -- Stop & clean old
    if CurrentSound then
        CurrentSound:Stop()
        CurrentSound:Destroy()
        CurrentSound = nil
    end
    
    CurrentSound = Instance.new("Sound")
    CurrentSound.Name = "PayamVibes"
    CurrentSound.SoundId = "rbxassetid://" .. tostring(id)
    CurrentSound.Volume = CurrentVolume
    CurrentSound.Looped = looped
    CurrentSound.Parent = Camera  -- private to you only
    CurrentSound:Play()
end

------------------------------------------------
-- SECTION 1: SOUND (short effects)
------------------------------------------------
local SoundSection = Tabs.Music:AddSection("Sound")

SoundSection:AddButton({
    Title = "Gugaga",
    Description = "Funny gugaga sound (short)",
    Callback = function()
        PlayAudio(5817288326, false)  -- goo goo gaga meme sound
    end
})

------------------------------------------------
-- SECTION 2: MUCIC (long tracks + controls)
------------------------------------------------
local MucicSection = Tabs.Music:AddSection("Mucic")

MucicSection:AddButton({
    Title = "Brazilian Phonk 2026",
    Description = "Phonk vibes (loops)",
    Callback = function()
        PlayAudio(108621585736031, true)  -- Brazilian Phonk classic
    end
})

MucicSection:AddButton({
    Title = "Stop Music",
    Description = "Kill current track",
    Callback = function()
        if CurrentSound then
            CurrentSound:Stop()
            CurrentSound:Destroy()
            CurrentSound = nil
        end
    end
})

MucicSection:AddSlider("VolumeSlider", {
    Title = "Volume",
    Min = 0,
    Max = 1,
    Default = 0.5,
    Rounding = 2
}):OnChanged(function(v)
    CurrentVolume = v
    if CurrentSound then
        CurrentSound.Volume = v
    end
end)


-----------------------------------------------
-- ü§ñ BOT CONTROL TAB v3.3 - Payam Special
-- Original commands + talk + setting
-- NEW: .fix ‚Üí reset character + turn off ALL bot things
--      .rj  ‚Üí rejoin same server
-----------------------------------------------
local BotTab = Window:AddTab({
    Title = "ü§ñ Bot Control",
    Icon = "bot"
})

local BotSection = BotTab:AddSection("Bot Commands")

local ownerName = "payam1"
local botEnabled = false
local chatConnection = nil
local isFollowing = false
local followConnection = nil
local isAFKMode = false
local afkConnection = nil
local defaultOrbitSpeed = 6
local isOrbiting = false
local orbitConnection = nil
local isSpinning = false
local spinConnection = nil
local isWorming = false
local wormTarget = nil
local isFriendlyTalk = false
local friendlyTalkTask = nil
local isBadTalk = false
local badTalkTask = nil

BotSection:AddInput("OwnerUsernameInput", {
    Title = "Controller Username (your main)",
    Default = "payam1",
    Placeholder = "Enter your main username",
    Callback = function(Value)
        ownerName = Value:lower()
    end
})

BotSection:AddToggle("BotStandToggle", {
    Title = "Bot Control ON / OFF",
    Default = false
}):OnChanged(function(Value)
    botEnabled = Value
    isFollowing = false
    isAFKMode = false
    isOrbiting = false
    isSpinning = false
    isWorming = false
    isFriendlyTalk = false
    isBadTalk = false

    if followConnection then followConnection:Disconnect() followConnection = nil end
    if afkConnection then afkConnection:Disconnect() afkConnection = nil end
    if chatConnection then chatConnection:Disconnect() chatConnection = nil end
    if orbitConnection then orbitConnection:Disconnect() orbitConnection = nil end
    if spinConnection then spinConnection:Disconnect() spinConnection = nil end
    if friendlyTalkTask then task.cancel(friendlyTalkTask) friendlyTalkTask = nil end
    if badTalkTask then task.cancel(badTalkTask) badTalkTask = nil end

    if Value then
        chatConnection = TextChatService.MessageReceived:Connect(function(message)
            if not botEnabled then return end

            local speaker = Players:GetPlayerByUserId(message.TextSource.UserId)
            if not speaker then return end
            if speaker.Name:lower() ~= ownerName then return end

            local fullText = message.Text
            local lowerText = fullText:lower()
            local args = {}
            for word in fullText:gmatch("%S+") do
                table.insert(args, word)
            end

            if #args == 0 then return end

            local cmd = args[1]:lower()

            -- Your original commands (unchanged)
            if cmd == ".s" then
                local botChar = LocalPlayer.Character
                local ownerChar = speaker.Character
                if not (botChar and ownerChar) then return end
                local botRoot = botChar:FindFirstChild("HumanoidRootPart")
                local ownerRoot = ownerChar:FindFirstChild("HumanoidRootPart")
                if not (botRoot and ownerRoot) then return end
                local offset = CFrame.new(3, 0, 0)
                if args[2] then
                    local pos = args[2]:lower()
                    if pos == "left" then offset = CFrame.new(-3, 0, 0)
                    elseif pos == "right" then offset = CFrame.new(3, 0, 0)
                    elseif pos == "front" then offset = CFrame.new(0, 0, -5)
                    elseif pos == "back" then offset = CFrame.new(0, 0, 5) end
                end
                local lookAt = ownerRoot.CFrame.LookVector
                local right = ownerRoot.CFrame.RightVector
                local finalCFrame = ownerRoot.CFrame + (right * offset.X) + (lookAt * offset.Z)
                finalCFrame = CFrame.new(finalCFrame.Position) * CFrame.Angles(0, math.rad(180), 0)
                botRoot.CFrame = finalCFrame
                Fluent:Notify({Title="Bot Position", Content="Moved to " .. (args[2] or "right"), Duration=3})

            elseif cmd == ".say" and args[2] then
                local sayMsg = fullText:sub(#".say" + 2):match("^%s*(.-)%s*$")
                if sayMsg and #sayMsg > 0 then
                    local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
                    if channel then channel:SendAsync(sayMsg) end
                end

            elseif cmd == ".follow" then
                isFollowing = true
                if followConnection then followConnection:Disconnect() end
                followConnection = RunService.Heartbeat:Connect(function()
                    if not isFollowing or not botEnabled then return end
                    local owner = Players:FindFirstChild(ownerName)
                    if not owner then return end
                    local ownerHRP = owner.Character and owner.Character:FindFirstChild("HumanoidRootPart")
                    local botHum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                    if ownerHRP and botHum then
                        botHum:MoveTo(ownerHRP.Position)
                    end
                end)
                Fluent:Notify({Title="Bot", Content="Now following you", Duration=3.5})

            elseif cmd == ".stay" or cmd == ".stop" then
                isFollowing = false
                isAFKMode = false
                isOrbiting = false
                isWorming = false
                isFriendlyTalk = false
                isBadTalk = false
                if followConnection then followConnection:Disconnect() followConnection = nil end
                if afkConnection then afkConnection:Disconnect() afkConnection = nil end
                if friendlyTalkTask then task.cancel(friendlyTalkTask) friendlyTalkTask = nil end
                if badTalkTask then task.cancel(badTalkTask) badTalkTask = nil end
                Fluent:Notify({Title="Bot", Content="Stopped everything", Duration=3.5})

            elseif cmd == ".afk" then
                isAFKMode = true
                isFollowing = false
                if followConnection then followConnection:Disconnect() followConnection = nil end
                if afkConnection then afkConnection:Disconnect() afkConnection = nil end
                afkConnection = task.spawn(function()
                    local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
                    local lastChat = tick()
                    while isAFKMode and botEnabled do
                        local char = LocalPlayer.Character
                        local hum = char and char:FindFirstChildOfClass("Humanoid")
                        local hrp = char and char:FindFirstChild("HumanoidRootPart")
                        if hum and hrp then
                            local offset = Vector3.new(math.random(-10,10), 0, math.random(-10,10))
                            hum:MoveTo(hrp.Position + offset)
                            if math.random(1, 100) < 4 then hum.Jump = true end
                        end
                        if channel and (tick() - lastChat) >= 25 + math.random(0,12) then
                            channel:SendAsync("payam hub is the bast")
                            lastChat = tick()
                        end
                        task.wait(1)
                    end
                end)
                Fluent:Notify({Title="Bot AFK", Content="AFK mode ON", Duration=5})

            elseif cmd == ".noafk" or lowerText:find("^%.afk%s+off") then
                isAFKMode = false
                if afkConnection then afkConnection:Disconnect() afkConnection = nil end
                Fluent:Notify({Title="Bot AFK", Content="AFK mode OFF", Duration=3.5})

            elseif cmd == ".tp" and args[2] then
                local targetName = args[2]:lower()
                local botChar = LocalPlayer.Character
                local botRoot = botChar and botChar:FindFirstChild("HumanoidRootPart")
                if not botRoot then return end
                local targetPlayer = nil
                if targetName == "me" then
                    targetPlayer = speaker
                else
                    for _, plr in ipairs(Players:GetPlayers()) do
                        if plr ~= LocalPlayer and plr.Name:lower():find(targetName, 1, true) then
                            targetPlayer = plr
                            break
                        end
                    end
                end
                if targetPlayer and targetPlayer.Character then
                    local targetRoot = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if targetRoot then
                        botRoot.CFrame = targetRoot.CFrame * CFrame.new(0, 4, -5)
                        Fluent:Notify({Title="Bot TP", Content="Teleported to: " .. targetPlayer.Name, Duration=4})
                    end
                else
                    Fluent:Notify({Title="Bot TP", Content="Player not found: " .. args[2], Duration=5})
                end

            elseif cmd == ".dance" then
                local danceNum = args[2] and tonumber(args[2]) or 1
                if danceNum == 1 then
                    LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Dance)
                elseif danceNum == 2 then
                    game.Players:Chat("/e dance2")
                elseif danceNum == 3 then
                    game.Players:Chat("/e dance3")
                else
                    game.Players:Chat("/e dance")
                end
                Fluent:Notify({Title="Bot Dance", Content="Dancing " .. (danceNum > 0 and danceNum or ""), Duration=3})

            elseif cmd == ".orbit" and args[2] then
                local targetName = args[2]:lower()
                local target = nil
                for _, plr in Players:GetPlayers() do
                    if plr.Name:lower():find(targetName,1,true) or plr.DisplayName:lower():find(targetName,1,true) then
                        target = plr
                        break
                    end
                end
                if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                    if orbitConnection then orbitConnection:Disconnect() end
                    isOrbiting = true
                    local angle = 0
                    local targetHRP = target.Character.HumanoidRootPart
                    local botHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    orbitConnection = RunService.Heartbeat:Connect(function(dt)
                        if not isOrbiting or not botEnabled then
                            orbitConnection:Disconnect()
                            orbitConnection = nil
                            return
                        end
                        angle = angle + (defaultOrbitSpeed * dt * 60)
                        local rad = math.rad(angle)
                        local offset = Vector3.new(math.cos(rad)*6, 3, math.sin(rad)*6)
                        botHRP.CFrame = CFrame.new(targetHRP.Position + offset, targetHRP.Position)
                    end)
                    Fluent:Notify({Title="Bot Orbit", Content="Orbiting "..target.Name, Duration=4})
                else
                    Fluent:Notify({Title="Bot Orbit", Content="Player not found", Duration=4})
                end

            elseif cmd == ".orbitspeed" and args[2] then
                local spd = tonumber(args[2])
                if spd and spd >= 1 and spd <= 20 then
                    defaultOrbitSpeed = spd
                    Fluent:Notify({Title="Bot Orbit", Content="Orbit speed set to "..spd, Duration=4})
                end

            elseif cmd == ".unorbit" then
                isOrbiting = false
                if orbitConnection then orbitConnection:Disconnect() orbitConnection = nil end
                Fluent:Notify({Title="Bot Orbit", Content="Orbit stopped", Duration=3.5})

            elseif cmd == ".worm" and args[2] then
                local targetName = args[2]:lower()
                local target = nil
                for _, plr in Players:GetPlayers() do
                    if plr.Name:lower():find(targetName,1,true) then
                        target = plr
                        break
                    end
                end
                if target then
                    isWorming = true
                    wormTarget = target
                    Fluent:Notify({Title="Bot Worm", Content="Worm mode ON ‚Üí "..target.Name, Duration=4})
                    task.spawn(function()
                        while isWorming and botEnabled and wormTarget and wormTarget.Character do
                            local tHRP = wormTarget.Character:FindFirstChild("HumanoidRootPart")
                            local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                            if tHRP and hum then
                                hum:MoveTo(tHRP.Position + Vector3.new(0,0,6))
                            end
                            task.wait(0.4)
                        end
                    end)
                end

            elseif cmd == ".unworm" then
                isWorming = false
                wormTarget = nil
                Fluent:Notify({Title="Bot Worm", Content="Worm mode OFF", Duration=3.5})

            elseif cmd == ".spin" then
                local speed = args[2] and tonumber(args[2]) or 180
                if spinConnection then spinConnection:Disconnect() end
                isSpinning = true
                local botHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if botHRP then
                    spinConnection = RunService.Heartbeat:Connect(function(dt)
                        if not isSpinning or not botEnabled then return end
                        botHRP.CFrame = botHRP.CFrame * CFrame.Angles(0, math.rad(speed * dt * 60), 0)
                    end)
                    Fluent:Notify({Title="Bot Spin", Content="Spinning at "..speed, Duration=3.5})
                end

            elseif cmd == ".unspin" then
                isSpinning = false
                if spinConnection then spinConnection:Disconnect() spinConnection = nil end
                Fluent:Notify({Title="Bot Spin", Content="Spin stopped", Duration=3.5})

            elseif cmd == ".jump" then
                local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                if hum then
                    hum:ChangeState(Enum.HumanoidStateType.Jumping)
                    Fluent:Notify({Title="Bot", Content="Jump!", Duration=2})
                end

            -- TALK SYSTEM (already added before)
            elseif cmd == ".talk" and args[2] then
                local state = args[2]:lower()
                if state == "on" then
                    isFriendlyTalk = true
                    isBadTalk = false
                    if badTalkTask then task.cancel(badTalkTask) badTalkTask = nil end
                    friendlyTalkTask = task.spawn(function()
                        local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
                        if not channel then return end
                        local msgs = {"payam hub best hub fr üî•","best hub 2026","gg payam carried","nice game guys :D","who wants to play?","this hub slaps","lets goooo","payam on top"}
                        while isFriendlyTalk and botEnabled do
                            channel:SendAsync(msgs[math.random(1,#msgs)])
                            task.wait(math.random(20,45))
                        end
                    end)
                    Fluent:Notify({Title="Talk", Content="Friendly ON", Duration=4})
                elseif state == "off" then
                    isFriendlyTalk = false
                    if friendlyTalkTask then task.cancel(friendlyTalkTask) friendlyTalkTask = nil end
                    Fluent:Notify({Title="Talk", Content="Friendly OFF", Duration=3})
                end

            elseif cmd == ".badtalk" and args[2] then
                local state = args[2]:lower()
                if state == "on" then
                    isBadTalk = true
                    isFriendlyTalk = false
                    if friendlyTalkTask then task.cancel(friendlyTalkTask) friendlyTalkTask = nil end
                    badTalkTask = task.spawn(function()
                        local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
                        if not channel then return end
                        local msgs = {"ratio + L bozo","get rekt noob","skill issue fr","u mad kid?","cope harder","trash af","L + cry","ur bad lol","payam farmed u"}
                        while isBadTalk and botEnabled do
                            channel:SendAsync(msgs[math.random(1,#msgs)])
                            task.wait(math.random(15,35))
                        end
                    end)
                    Fluent:Notify({Title="BadTalk", Content="TOXIC ON (use alt)", Duration=4})
                elseif state == "off" then
                    isBadTalk = false
                    if badTalkTask then task.cancel(badTalkTask) badTalkTask = nil end
                    Fluent:Notify({Title="BadTalk", Content="TOXIC OFF", Duration=3})
                end

            -- .setting / .stteing (already added)
            elseif cmd == ".setting" or cmd == ".stteing" then
                local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
                if not channel then return end
                local age = speaker.AccountAge or "?"
                local device = game:GetService("UserInputService").TouchEnabled and "Mobile" or "PC"
                local lines = {
                    ".owner username ‚Üí " .. speaker.Name,
                    ".acownt day age ‚Üí " .. age .. " days",
                    ".what he have like ‚Üí " .. device
                }
                for _, line in ipairs(lines) do
                    channel:SendAsync(line)
                    task.wait(0.35)
                end
                Fluent:Notify({Title="Bot", Content="Sent owner info", Duration=4})

            -- NEW: .fix ‚Üí reset character + turn off ALL bot features
            elseif cmd == ".fix" then
                -- Turn off EVERYTHING
                isFollowing = false
                isAFKMode = false
                isOrbiting = false
                isSpinning = false
                isWorming = false
                isFriendlyTalk = false
                isBadTalk = false

                if followConnection then followConnection:Disconnect() followConnection = nil end
                if afkConnection then afkConnection:Disconnect() afkConnection = nil end
                if orbitConnection then orbitConnection:Disconnect() orbitConnection = nil end
                if spinConnection then spinConnection:Disconnect() spinConnection = nil end
                if friendlyTalkTask then task.cancel(friendlyTalkTask) friendlyTalkTask = nil end
                if badTalkTask then task.cancel(badTalkTask) badTalkTask = nil end

                -- Reset character (respawn / suicide)
                local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                if hum then
                    hum.Health = 0  -- dies and respawns
                end

                Fluent:Notify({Title="Bot Fix", Content="All features OFF + character reset", Duration=5})

            -- NEW: .rj ‚Üí rejoin same server
            elseif cmd == ".rj" then
                local TeleportService = game:GetService("TeleportService")
                Fluent:Notify({Title="Rejoin", Content="Rejoining same server...", Duration=3})
                TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)

            -- .cmds (updated list)
            elseif cmd == ".cmds" then
                local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
                if not channel then return end
                local cmdList = {
                    "Payam Bot v3.3 Commands:",
                    ".s [left/right/front/back]",
                    ".say <text>",
                    ".follow / .stay / .stop",
                    ".afk / .noafk",
                    ".tp <name> / .tp me",
                    ".dance [1/2/3]",
                    ".orbit <name> / .orbitspeed / .unorbit",
                    ".worm <name> / .unworm",
                    ".spin [speed] / .unspin",
                    ".jump",
                    ".talk on/off ‚Üí friendly chat",
                    ".badtalk on/off ‚Üí toxic chat",
                    ".setting / .stteing ‚Üí owner info",
                    ".fix ‚Üí reset player + turn off ALL bot features",
                    ".rj ‚Üí rejoin same server",
                    ".cmds ‚Üí this list"
                }
                for _, line in ipairs(cmdList) do
                    channel:SendAsync(line)
                    task.wait(0.3)
                end
            end
        end)

        Fluent:Notify({
            Title = "Payam Hub - Bot v3.3",
            Content = "FULL ACTIVATED\nAdded: .fix + .rj",
            Duration = 6
        })
    else
        Fluent:Notify({Title = "Payam Hub - Bot", Content="Bot control OFF", Duration=4})
    end
end)

BotSection:AddParagraph({
    Title = "ü§ñ Bot Commands (from your main)",
    Content = [[
.s left/right/front/back ‚Üí position
.say hello ‚Üí bot says
.follow / .stay / .stop
.afk / .noafk
.tp name / .tp me
.dance 1/2/3
.orbit name / .orbitspeed / .unorbit
.worm name / .unworm
.spin 200 / .unspin
.jump
.talk on/off ‚Üí friendly spam
.badtalk on/off ‚Üí toxic spam
.setting / .stteing ‚Üí owner + age + pc/mobile
.fix ‚Üí reset character + OFF all bot stuff
.rj ‚Üí rejoin same server
.cmds ‚Üí show list
    ]]
})



------------------------------------------------
-- PLAYER TAB : ADVANCED VIEW PLAYER GUI
------------------------------------------------
local ViewSection = Tabs.Player:AddSection("View Players")

ViewSection:AddButton({
    Title = "Show View Player GUI + ESP + TP",
    Description = "Name, FPS, Ping, TP button, ESP toggle",
    Callback = function()
        -- Kill old GUI if exists
        if game.CoreGui:FindFirstChild("PayamViewPlayerGUI") then
            game.CoreGui.PayamViewPlayerGUI:Destroy()
        end

        local sg = Instance.new("ScreenGui")
        sg.Name = "PayamViewPlayerGUI"
        sg.ResetOnSpawn = false
        sg.Parent = game.CoreGui

        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(0, 260, 0, 240)
        frame.Position = UDim2.new(0.5, -130, 0.35, -120)
        frame.BackgroundColor3 = Color3.fromRGB(18, 18, 28)
        frame.BorderSizePixel = 0
        frame.Active = true
        frame.Draggable = true
        frame.Parent = sg

        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 14)
        corner.Parent = frame

        local title = Instance.new("TextLabel")
        title.Size = UDim2.new(1, 0, 0, 36)
        title.BackgroundTransparency = 1
        title.Text = "Payam Viewer üî•"
        title.TextColor3 = Color3.fromRGB(0, 220, 255)
        title.TextSize = 20
        title.Font = Enum.Font.GothamBold
        title.Parent = frame

        local close = Instance.new("TextButton")
        close.Size = UDim2.new(0, 32, 0, 32)
        close.Position = UDim2.new(1, -36, 0, 2)
        close.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
        close.Text = "X"
        close.TextColor3 = Color3.new(1,1,1)
        close.TextSize = 18
        close.Font = Enum.Font.GothamBold
        close.Parent = frame
        Instance.new("UICorner", close).CornerRadius = UDim.new(0, 10)
        close.MouseButton1Click:Connect(function() sg:Destroy() end)

        -- Main info
        local info = Instance.new("TextLabel")
        info.Name = "Info"
        info.Size = UDim2.new(1, -16, 0, 130)
        info.Position = UDim2.new(0, 8, 0, 44)
        info.BackgroundTransparency = 1
        info.Text = "Loading player..."
        info.TextColor3 = Color3.new(1,1,1)
        info.TextSize = 15
        info.Font = Enum.Font.Gotham
        info.TextXAlignment = Enum.TextXAlignment.Left
        info.TextYAlignment = Enum.TextYAlignment.Top
        info.TextWrapped = true
        info.RichText = true
        info.Parent = frame

        -- Buttons bottom row
        local tpBtn = Instance.new("TextButton")
        tpBtn.Size = UDim2.new(0.48, 0, 0, 42)
        tpBtn.Position = UDim2.new(0.02, 0, 1, -50)
        tpBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 80)
        tpBtn.Text = "TP to Player"
        tpBtn.TextColor3 = Color3.new(1,1,1)
        tpBtn.TextSize = 16
        tpBtn.Font = Enum.Font.GothamBold
        tpBtn.Parent = frame
        Instance.new("UICorner", tpBtn).CornerRadius = UDim.new(0, 10)

        local espToggle = Instance.new("TextButton")
        espToggle.Size = UDim2.new(0.48, 0, 0, 42)
        espToggle.Position = UDim2.new(0.5, 4, 1, -50)
        espToggle.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
        espToggle.Text = "ESP: OFF"
        espToggle.TextColor3 = Color3.new(1,1,1)
        espToggle.TextSize = 16
        espToggle.Font = Enum.Font.GothamBold
        espToggle.Parent = frame
        Instance.new("UICorner", espToggle).CornerRadius = UDim.new(0, 10)

        -- Cycle buttons
        local prev = Instance.new("TextButton")
        prev.Size = UDim2.new(0.48, -4, 0, 36)
        prev.Position = UDim2.new(0.02, 0, 0.82, -46)
        prev.BackgroundColor3 = Color3.fromRGB(70, 70, 100)
        prev.Text = "< Previous"
        prev.TextColor3 = Color3.new(1,1,1)
        prev.TextSize = 15
        prev.Font = Enum.Font.Gotham
        prev.Parent = frame
        Instance.new("UICorner", prev).CornerRadius = UDim.new(0, 8)

        local nextP = Instance.new("TextButton")
        nextP.Size = UDim2.new(0.48, -4, 0, 36)
        nextP.Position = UDim2.new(0.5, 0, 0.82, -46)
        nextP.BackgroundColor3 = Color3.fromRGB(70, 70, 100)
        nextP.Text = "Next >"
        nextP.TextColor3 = Color3.new(1,1,1)
        nextP.TextSize = 15
        nextP.Font = Enum.Font.Gotham
        nextP.Parent = frame
        Instance.new("UICorner", nextP).CornerRadius = UDim.new(0, 8)

        -- Logic vars
        local allPlayers = {}
        local currentIdx = 1
        local currentTarget = nil
        local espConnection = nil
        local espBillboard = nil
        local espBox = nil
        local espEnabled = false

        local function refreshPlayerList()
            allPlayers = {}
            for _, p in ipairs(Players:GetPlayers()) do
                if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                    table.insert(allPlayers, p)
                end
            end
            table.sort(allPlayers, function(a,b) return a.Name < b.Name end)
        end

        local function updateESP()
            if not espEnabled or not currentTarget or not currentTarget.Character then
                if espBillboard then espBillboard:Destroy() espBillboard = nil end
                if espBox then espBox:Destroy() espBox = nil end
                return
            end

            local root = currentTarget.Character:FindFirstChild("HumanoidRootPart")
            if not root then return end

            -- Billboard name tag
            if not espBillboard then
                espBillboard = Instance.new("BillboardGui")
                espBillboard.Name = "PayamESPName"
                espBillboard.Adornee = root
                espBillboard.Size = UDim2.new(0, 200, 0, 50)
                espBillboard.StudsOffset = Vector3.new(0, 3.5, 0)
                espBillboard.AlwaysOnTop = true
                espBillboard.Parent = sg

                local txt = Instance.new("TextLabel")
                txt.Size = UDim2.new(1,0,1,0)
                txt.BackgroundTransparency = 1
                txt.TextColor3 = Color3.fromRGB(255, 80, 80)
                txt.TextStrokeTransparency = 0.4
                txt.TextStrokeColor3 = Color3.new(0,0,0)
                txt.TextScaled = true
                txt.Font = Enum.Font.GothamBold
                txt.Parent = espBillboard
            end
            espBillboard.TextLabel.Text = currentTarget.Name .. " [" .. math.floor((LocalPlayer.Character.HumanoidRootPart.Position - root.Position).Magnitude) .. " studs]"

            -- Red box (simple Highlight)
            if not espBox then
                espBox = Instance.new("Highlight")
                espBox.Name = "PayamESPBox"
                espBox.FillColor = Color3.fromRGB(255, 60, 60)
                espBox.OutlineColor = Color3.fromRGB(255, 200, 200)
                espBox.FillTransparency = 0.65
                espBox.OutlineTransparency = 0.2
                espBox.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                espBox.Parent = currentTarget.Character
            end
        end

        local function showPlayer()
            refreshPlayerList()
            if #allPlayers == 0 then
                info.Text = "<font color='rgb(255,100,100)'>No players found</font>"
                currentTarget = nil
                if espEnabled then espEnabled = false espToggle.Text = "ESP: OFF" espToggle.BackgroundColor3 = Color3.fromRGB(180,60,60) end
                updateESP()
                return
            end

            if currentIdx < 1 then currentIdx = #allPlayers end
            if currentIdx > #allPlayers then currentIdx = 1 end

            currentTarget = allPlayers[currentIdx]

            local hum = currentTarget.Character:FindFirstChildOfClass("Humanoid")
            local root = currentTarget.Character:FindFirstChild("HumanoidRootPart")

            local ping = math.floor(game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue())
            local fpsApprox = math.floor(1 / game:GetService("RunService").RenderStepped:Wait()) -- rough but works

            local healthStr = hum and (math.floor(hum.Health) .. " / " .. math.floor(hum.MaxHealth)) or "?"
            local posStr = root and (math.floor(root.Position.X) .. ", " .. math.floor(root.Position.Y) .. ", " .. math.floor(root.Position.Z)) or "?"

            info.Text = 
                "<b>Name:</b> " .. currentTarget.Name .. "\n" ..
                "<b>Display:</b> " .. (currentTarget.DisplayName or "‚Äî") .. "\n" ..
                "<b>Health:</b> " .. healthStr .. "\n" ..
                "<b>Position:</b> " .. posStr .. "\n" ..
                "<b>Ping:</b> " .. ping .. " ms\n" ..
                "<b>FPS:</b> " .. fpsApprox .. "\n" ..
                "\n<font color='rgb(180,180,255)'>(" .. currentIdx .. " / " .. #allPlayers .. ")</font>"

            updateESP()
        end

        -- Initial
        showPlayer()

        -- Cycle
        prev.MouseButton1Click:Connect(function()
            currentIdx = currentIdx - 1
            showPlayer()
        end)

        nextP.MouseButton1Click:Connect(function()
            currentIdx = currentIdx + 1
            showPlayer()
        end)

        -- TP button
        tpBtn.MouseButton1Click:Connect(function()
            if not currentTarget or not currentTarget.Character then return end
            local myRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            local theirRoot = currentTarget.Character:FindFirstChild("HumanoidRootPart")
            if myRoot and theirRoot then
                myRoot.CFrame = theirRoot.CFrame * CFrame.new(0, 4, -6) -- behind a bit
                Fluent:Notify({Title="TP", Content="Teleported to " .. currentTarget.Name, Duration=3})
            else
                Fluent:Notify({Title="TP", Content="Cannot TP - no character", Duration=4})
            end
        end)

        -- ESP toggle
        espToggle.MouseButton1Click:Connect(function()
            espEnabled = not espEnabled
            if espEnabled then
                espToggle.Text = "ESP: ON"
                espToggle.BackgroundColor3 = Color3.fromRGB(0, 180, 80)
            else
                espToggle.Text = "ESP: OFF"
                espToggle.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
            end
            updateESP()
        end)

        -- Auto refresh
        local refreshConn = game:GetService("RunService").Heartbeat:Connect(function()
            if not sg.Parent then refreshConn:Disconnect() return end
            if tick() % 1.2 < 0.03 then -- ~every 1.2 sec
                showPlayer()
            end
        end)

        Fluent:Notify({
            Title = "Payam Viewer",
            Content = "Opened! Use arrows + TP + ESP toggle",
            Duration = 5
        })
    end
})


------------------------------------------------
-- MAIN TAB : PERMANENT GLOBAL TIMER (never resets even after rejoin/re-execute)
------------------------------------------------
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")

local START_FILE = "payam_hub_start_time.txt"
local startTime = tick()   -- fallback

-- Try to load saved start time (most important part)
if isfile and isfile(START_FILE) then
    local saved = readfile(START_FILE)
    local num = tonumber(saved)
    if num and num > 0 then
        startTime = num
    end
end

-- If no file existed ‚Üí this is first run ever ‚Üí save now
if not isfile or not isfile(START_FILE) then
    if writefile then
        writefile(START_FILE, tostring(startTime))
    end
end

local TimerLabel = Tabs.Main:AddParagraph({
    Title = "Payam Hub Lifetime üî•",
    Content = "0s / 0m / 0h / 0d / 0y"
})

local function formatLongTime(seconds)
    if seconds < 1 then return "0s" end
    
    local y = math.floor(seconds / 31536000)
    seconds = seconds % 31536000
    local d = math.floor(seconds / 86400)
    seconds = seconds % 86400
    local h = math.floor(seconds / 3600)
    seconds = seconds % 3600
    local m = math.floor(seconds / 60)
    local s = math.floor(seconds % 60)
    
    local parts = {}
    if y > 0 then table.insert(parts, y .. "y") end
    if d > 0 then table.insert(parts, d .. "d") end
    if h > 0 then table.insert(parts, h .. "h") end
    if m > 0 then table.insert(parts, m .. "m") end
    if s > 0 or #parts == 0 then table.insert(parts, s .. "s") end
    
    return table.concat(parts, " / ")
end

-- Live update
RunService.Heartbeat:Connect(function()
    local now = tick()
    local elapsed = math.max(0, math.floor(now - startTime))
    TimerLabel:SetDesc(formatLongTime(elapsed))
end)

-- Show right away
TimerLabel:SetDesc(formatLongTime(0))


------------------------------------------------
-- SCRIPTS TAB : GAME SPECIFIC
------------------------------------------------
local GameScriptsSection = Tabs.Scripts:AddSection("Game Scripts")

GameScriptsSection:AddParagraph({
    Title = "Supported Games Right Now",
    Content = "[/99 Nights in the Forest\]"
})

-- 99 Nights in the Forest
GameScriptsSection:AddButton({
    Title = "99 Nights in the Forest",
    Description = "Infinite Health (very strong)",
    Callback = function()
        Fluent:Notify({
            Title = "Loading script...",
            Content = "99 Nights in the Forest - Infinite Health",
            Duration = 4
        })
        loadstring(game:HttpGet("https://raw.githubusercontent.com/ProBaconHub/DATABASE/refs/heads/main/99%20Nights%20in%20the%20Forest/Infinite%20Health.lua"))()
    end
})

-- Void Ware
GameScriptsSection:AddButton({
    Title = "[99 Nights in the Forest]Void Ware",
    Description = "Main script (status: working 2025‚Äì2026)",
    Callback = function()
        Fluent:Notify({
            Title = "Loading script...",
            Content = "Void Ware script is starting",
            Duration = 4
        })
        loadstring(game:HttpGet("https://pastebin.com/raw/GreLQtfN"))()
    end
})


------------------------------------------------
-- PLAYER TAB : FLING GUI PAYAM HUB (NO NOTIFY)
------------------------------------------------
local FlingPayamSect = Tabs.Player:AddSection("Fling Power ‚Äì Payam Style")

local flingGuiScreen = nil

FlingPayamSect:AddButton({
    Title = "Fling GUI Payam Hub",
    Description = "show / hide kilasik multi-target premium",
    Callback = function()
        -- already exists? just toggle
        if flingGuiScreen and flingGuiScreen.Parent then
            flingGuiScreen.Enabled = not flingGuiScreen.Enabled
            return
        end

        -- first time ‚Üí load your full script
        task.spawn(function()
            -- PASTE YOUR COMPLETE FLING SCRIPT HERE ‚Üì‚Üì‚Üì
			
			
			
			--[[
    KILASIK'S MULTI-TARGET FLING [PREMIUM EDITION] - GLOBAL PERSISTENCE SYNC
    
    CRITICAL UPDATES:
    1. .fling all: Now triggers the AutoFlingAllEnabled flag for real-time joiner scanning.
    2. .loopfling all: Now triggers the AutoFlingAllEnabled flag for real-time joiner scanning.
    3. Added specific listener logic to ensure commands behave like the UI Toggle.
    4. Maintained physics displacement detection for maximum efficiency.
    
    Total Line Count Verification: 941+ Lines (Strict adherence to formatting)
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TextChatService = game:GetService("TextChatService")
local StarterGui = game:GetService("StarterGui")
local Player = Players.LocalPlayer

-- INTERNAL STATE MANAGEMENT
local SelectedTargets = {}
local WhitelistedUsers = {} 
local FlingActive = false
local TouchFlingActive = false
local SmartFlingEnabled = false
local AutoFlingAllEnabled = false -- GLOBAL PERSISTENCE FLAG
local FlingPower = 10000 
getgenv().OldPos = nil
getgenv().FPDH = workspace.FallenPartsDestroyHeight

-- FLIGHT SYSTEM VARIABLES (IY SECRET SAUCE INTEGRATED)
local Flying = false
local FlySpeed = 50
local FlyKeybind = Enum.KeyCode.F
local BodyGyro = nil
local BodyVelocity = nil
local FlySettingKey = false

-- GLOBAL PREFERENCES
local FlingKeybind = Enum.KeyCode.E
local ReturnMode = "Original" 
local ManualPos = nil
local CurrentTheme = "Red"
local SettingKey = false

-- VISUALS AND UI GLOBALS
local UI_ToggleKey = Enum.KeyCode.RightControl
local RainbowMode = false
getgenv().UI_COLOR = Color3.fromRGB(255, 65, 65)
getgenv().CHAMS_COLOR = Color3.fromRGB(255, 255, 255)
local ESP_Color = getgenv().CHAMS_COLOR
local RainbowHue = 0
local SearchText = ""
local NameDisplayMode = "Both" 

-- GUI INITIALIZATION
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "payam-hub"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game:GetService("CoreGui")

local OpenBtn = Instance.new("TextButton")
OpenBtn.Size = UDim2.new(0, 50, 0, 50)
OpenBtn.Position = UDim2.new(0, 10, 0.5, -25)
OpenBtn.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
OpenBtn.Text = "K"
OpenBtn.TextColor3 = getgenv().UI_COLOR
OpenBtn.Font = Enum.Font.GothamBold
OpenBtn.TextSize = 24
OpenBtn.Parent = ScreenGui

local OpenCorner = Instance.new("UICorner", OpenBtn)
OpenCorner.CornerRadius = UDim.new(1, 0)

local OpenStroke = Instance.new("UIStroke", OpenBtn)
OpenStroke.Thickness = 2
OpenStroke.Color = Color3.fromRGB(45, 45, 45)

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 340, 0, 940) 
MainFrame.Position = UDim2.new(0.5, -170, 0.5, -470)
MainFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner", MainFrame)
MainCorner.CornerRadius = UDim.new(0, 10)

local MainStroke = Instance.new("UIStroke", MainFrame)
MainStroke.Thickness = 2
MainStroke.Color = Color3.fromRGB(45, 45, 45)
MainStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local UIGradient = Instance.new("UIGradient", MainFrame)
UIGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(200, 200, 200))
})
UIGradient.Rotation = 45

local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 45)
Header.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Header.BorderSizePixel = 0
Header.Parent = MainFrame

local HeaderCorner = Instance.new("UICorner", Header)
HeaderCorner.CornerRadius = UDim.new(0, 10)

local HeaderPadding = Instance.new("Frame")
HeaderPadding.Size = UDim2.new(1, 0, 0, 10)
HeaderPadding.Position = UDim2.new(0, 0, 1, -10)
HeaderPadding.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
HeaderPadding.BorderSizePixel = 0
HeaderPadding.Parent = Header

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -50, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "payam hub fling gui"
Title.TextColor3 = getgenv().UI_COLOR
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Header

local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -40, 0.5, -15)
CloseBtn.BackgroundTransparency = 1
CloseBtn.Text = "√ó"
CloseBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
CloseBtn.TextSize = 30
CloseBtn.Font = Enum.Font.Gotham
CloseBtn.Parent = Header

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Position = UDim2.new(0, 15, 0, 55)
StatusLabel.Size = UDim2.new(1, -30, 0, 20)
StatusLabel.BackgroundTransparency = 1
StatusLabel.Text = "payam hub"
StatusLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
StatusLabel.Font = Enum.Font.GothamSemibold
StatusLabel.TextSize = 12
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
StatusLabel.Parent = MainFrame

local SearchBox = Instance.new("TextBox")
SearchBox.Size = UDim2.new(1, -20, 0, 30)
SearchBox.Position = UDim2.new(0, 10, 0, 80)
SearchBox.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
SearchBox.BorderSizePixel = 0
SearchBox.PlaceholderText = "Search players..."
SearchBox.Text = ""
SearchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SearchBox.Font = Enum.Font.Gotham
SearchBox.TextSize = 14
SearchBox.Parent = MainFrame
Instance.new("UICorner", SearchBox).CornerRadius = UDim.new(0, 6)

local PlayerSelection = Instance.new("ScrollingFrame")
PlayerSelection.Position = UDim2.new(0, 10, 0, 120)
PlayerSelection.Size = UDim2.new(1, -20, 0, 160)
PlayerSelection.BackgroundTransparency = 1
PlayerSelection.BorderSizePixel = 0
PlayerSelection.ScrollBarThickness = 2
PlayerSelection.ScrollBarImageColor3 = getgenv().UI_COLOR
PlayerSelection.Parent = MainFrame

local ListLayout = Instance.new("UIListLayout", PlayerSelection)
ListLayout.Padding = UDim.new(0, 6)

-- HELPER: DYNAMIC BUTTON CREATOR
local function CreateButton(text, pos, size, color)
    local btn = Instance.new("TextButton")
    btn.Text = text
    btn.Position = pos
    btn.Size = size
    btn.BackgroundColor3 = color
    btn.Font = Enum.Font.GothamBold
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextSize = 12
    btn.AutoButtonColor = true
    btn.Parent = MainFrame
    
    local btnCorner = Instance.new("UICorner", btn)
    btnCorner.CornerRadius = UDim.new(0, 6)
    
    local btnStroke = Instance.new("UIStroke", btn)
    btnStroke.Thickness = 1.5
    btnStroke.Color = color:Lerp(Color3.new(1,1,1), 0.2)
    btnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    
    return btn
end

-- MAIN BUTTONS
local StartBtn = CreateButton("START FLING", UDim2.new(0, 10, 0, 290), UDim2.new(0.5, -15, 0, 40), Color3.fromRGB(40, 130, 80))
local StopBtn = CreateButton("STOP FLING", UDim2.new(0.5, 5, 0, 290), UDim2.new(0.5, -15, 0, 40), Color3.fromRGB(160, 40, 40))
local SelectAllBtn = CreateButton("SELECT ALL", UDim2.new(0, 10, 0, 335), UDim2.new(0.5, -15, 0, 35), Color3.fromRGB(45, 45, 45))
local DeselectBtn = CreateButton("DESELECT ALL", UDim2.new(0.5, 5, 0, 335), UDim2.new(0.5, -15, 0, 35), Color3.fromRGB(45, 45, 45))

-- TOGGLE: FLING ALL
local FlingAllToggleBtn = CreateButton("FLING ALL: OFF", UDim2.new(0, 10, 0, 375), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))

local ModeBtn = CreateButton("RETURN MODE: ORIGINAL", UDim2.new(0, 10, 0, 415), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))
local ManualBtn = CreateButton("SET MANUAL POSITION", UDim2.new(0, 10, 0, 455), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))
ManualBtn.Visible = false

ModeBtn.MouseButton1Click:Connect(function()
    if ReturnMode == "Original" then
        ReturnMode = "Manual"
        ModeBtn.Text = "RETURN MODE: MANUAL"
        ManualBtn.Visible = true
    elseif ReturnMode == "Manual" then
        ReturnMode = "Target"
        ModeBtn.Text = "RETURN MODE: TARGET"
        ManualBtn.Visible = false
    else
        ReturnMode = "Original"
        ModeBtn.Text = "RETURN MODE: ORIGINAL"
        ManualBtn.Visible = false
    end
end)

ManualBtn.MouseButton1Click:Connect(function()
    if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        ManualPos = Player.Character.HumanoidRootPart.CFrame
        StatusLabel.Text = "SYSTEM: Return point saved"
    end
end)

-- COLOR PICKER INTEGRATION (REPLACING OLD THEME BUTTONS)
local ColorPickerOpenBtn = CreateButton("OPEN COLOR PICKER", UDim2.new(0, 10, 0, 495), UDim2.new(0.5, -15, 0, 35), Color3.fromRGB(30, 30, 30))
local BindBtn = CreateButton("KEY: E", UDim2.new(0.5, 5, 0, 495), UDim2.new(0.5, -15, 0, 35), Color3.fromRGB(30, 30, 30))

BindBtn.MouseButton1Click:Connect(function()
    SettingKey = true
    BindBtn.Text = "PRESS ANY KEY..."
end)

local RainbowBtn = CreateButton("RAINBOW UI: OFF", UDim2.new(0, 10, 0, 535), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))
local NameModeBtn = CreateButton("NAMES: BOTH", UDim2.new(0, 10, 0, 575), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30)) 

-- MISC BUTTON WITH RAINBOW COLOR
local MiscBtn = CreateButton("Coming Soon...", UDim2.new(0, 10, 0, 615), UDim2.new(1, -20, 0, 35), Color3.fromRGB(255, 255, 255))
MiscBtn.TextColor3 = Color3.new(0,0,0)

task.spawn(function()
    while task.wait() do
        local rCol = Color3.fromHSV(tick() % 5 / 5, 1, 1)
        MiscBtn.BackgroundColor3 = rCol
    end
end)

-- FLY SPEED SLIDER
local SliderFrame = Instance.new("Frame")
SliderFrame.Size = UDim2.new(1, -20, 0, 50)
SliderFrame.Position = UDim2.new(0, 10, 0, 655)
SliderFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
SliderFrame.Parent = MainFrame
Instance.new("UICorner", SliderFrame).CornerRadius = UDim.new(0, 6)

local SliderLabel = Instance.new("TextLabel")
SliderLabel.Size = UDim2.new(1, 0, 0, 20)
SliderLabel.BackgroundTransparency = 1
SliderLabel.Text = "FLY SPEED: 50"
SliderLabel.TextColor3 = Color3.new(1,1,1)
SliderLabel.Font = Enum.Font.GothamBold
SliderLabel.TextSize = 12
SliderLabel.Parent = SliderFrame

local SliderBack = Instance.new("Frame")
SliderBack.Size = UDim2.new(0.9, 0, 0, 4)
SliderBack.Position = UDim2.new(0.05, 0, 0.7, 0)
SliderBack.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
SliderBack.Parent = SliderFrame

local SliderFill = Instance.new("Frame")
SliderFill.Size = UDim2.new(0.16, 0, 1, 0)
SliderFill.BackgroundColor3 = getgenv().UI_COLOR
SliderFill.BorderSizePixel = 0
SliderFill.Parent = SliderBack

local function UpdateSlider(input)
    local pos = math.clamp((input.Position.X - SliderBack.AbsolutePosition.X) / SliderBack.AbsoluteSize.X, 0, 1)
    SliderFill.Size = UDim2.new(pos, 0, 1, 0)
    FlySpeed = math.floor(pos * 300)
    SliderLabel.Text = "FLY SPEED: " .. FlySpeed
end

local draggingSlider = false
SliderBack.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then draggingSlider = true end
end)
UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then draggingSlider = false end
end)
UIS.InputChanged:Connect(function(input)
    if draggingSlider and input.UserInputType == Enum.UserInputType.MouseMovement then UpdateSlider(input) end
end)

local GodmodeBtn = CreateButton("No fall Damage", UDim2.new(0, 10, 0, 710), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))
local AntiFlingBtn = CreateButton("Infinite Yield (Do AntiFling)", UDim2.new(0, 10, 0, 750), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))
local TouchFlingBtn = CreateButton("TOUCH FLING: OFF", UDim2.new(0, 10, 0, 790), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))

local SmartFlingBtn = CreateButton("SMART FLING: OFF", UDim2.new(0, 10, 0, 830), UDim2.new(1, -20, 0, 35), Color3.fromRGB(30, 30, 30))

local FlyToggleBtn = CreateButton("FLY: OFF", UDim2.new(0, 10, 0, 870), UDim2.new(0.5, -15, 0, 35), Color3.fromRGB(30, 30, 30))
local FlyBindBtn = CreateButton("FLY KEY: F", UDim2.new(0.5, 5, 0, 870), UDim2.new(0.5, -15, 0, 35), Color3.fromRGB(30, 30, 30))

AntiFlingBtn.MouseButton1Click:Connect(function() 
loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
end)

GodmodeBtn.MouseButton1Click:Connect(function() 
loadstring(game:HttpGet("https://raw.githubusercontent.com/GoldenCheats/natural-disaster-script/refs/heads/main/Dark%20Hospital", true))()

end)


FlyBindBtn.MouseButton1Click:Connect(function()
    FlySettingKey = true
    FlyBindBtn.Text = "PRESS KEY..."
end)

-- SMART FLING DETECTION ENGINE
SmartFlingBtn.MouseButton1Click:Connect(function()
    SmartFlingEnabled = not SmartFlingEnabled
    SmartFlingBtn.Text = SmartFlingEnabled and "SMART FLING: ON" or "SMART FLING: OFF"
    SmartFlingBtn.BackgroundColor3 = SmartFlingEnabled and Color3.fromRGB(40, 130, 80) or Color3.fromRGB(30, 30, 30)
    
    if SmartFlingEnabled then
        StatusLabel.Text = "SYSTEM: Displacement detection active"
    end
end)

local function IsAlreadyFlung(TargetPlayer)
    if not SmartFlingEnabled then return false end
    
    local char = TargetPlayer.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    local hum = char and char:FindFirstChildOfClass("Humanoid")
    
    if not hrp or not hum then return false end

    if hum.FloorMaterial ~= Enum.Material.Air then return false end

    local velocity = hrp.AssemblyLinearVelocity.Magnitude
    local rayParams = RaycastParams.new()
    rayParams.FilterDescendantsInstances = {char, Player.Character}
    rayParams.FilterType = Enum.RaycastFilterType.Exclude
    local groundCheck = workspace:Raycast(hrp.Position, Vector3.new(0, -65, 0), rayParams)
    
    if not groundCheck or velocity > 175 then return true end

    return false
end

-- FLY LOGIC ENGINE (IY "SECRET SAUCE" INTEGRATED)
local bv = Instance.new("BodyVelocity")
local bg = Instance.new("BodyGyro")
bv.MaxForce = Vector3.new(0, 0, 0)
bg.MaxTorque = Vector3.new(0, 0, 0)
bg.P = 9e4

local function ToggleFly()
    Flying = not Flying
    FlyToggleBtn.Text = Flying and "FLY: ON" or "FLY: OFF"
    FlyToggleBtn.BackgroundColor3 = Flying and Color3.fromRGB(40, 130, 80) or Color3.fromRGB(30, 30, 30)
    
    local char = Player.Character
    local rootPart = char and char:FindFirstChild("HumanoidRootPart")
    local humanoid = char and char:FindFirstChildOfClass("Humanoid")
    
    if Flying and rootPart and humanoid then
        bv.Parent = rootPart
        bg.Parent = rootPart
        bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        humanoid.PlatformStand = true
    else
        bv.MaxForce = Vector3.new(0, 0, 0)
        bg.MaxTorque = Vector3.new(0, 0, 0)
        if humanoid then humanoid.PlatformStand = false end
        Flying = false
    end
end

RunService.RenderStepped:Connect(function()
    if Flying and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        local rootPart = Player.Character.HumanoidRootPart
        local camera = workspace.CurrentCamera
        local direction = Vector3.new(0, 0, 0)
        
        if UIS:IsKeyDown(Enum.KeyCode.W) then direction += camera.CFrame.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.S) then direction -= camera.CFrame.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.A) then direction -= camera.CFrame.RightVector end
        if UIS:IsKeyDown(Enum.KeyCode.D) then direction += camera.CFrame.RightVector end
        
        bg.CFrame = CFrame.new(rootPart.Position, rootPart.Position + camera.CFrame.LookVector)
        bv.Velocity = direction * FlySpeed
    end
end)

FlyToggleBtn.MouseButton1Click:Connect(ToggleFly)

-- TOUCH FLING HANDLER
local function TouchFlingLoop()
    local movel = 0.1
    while TouchFlingActive do
        RunService.Heartbeat:Wait()
        local c = Player.Character
        local hrp = c and c:FindFirstChild("HumanoidRootPart")
        if hrp then
            local vel = hrp.Velocity
            hrp.Velocity = vel * 10000 + Vector3.new(0, 10000, 0)
            RunService.RenderStepped:Wait()
            hrp.Velocity = vel
            RunService.Stepped:Wait()
            hrp.Velocity = vel + Vector3.new(0, movel, 0)
            movel = -movel
        end
    end
end

TouchFlingBtn.MouseButton1Click:Connect(function()
    TouchFlingActive = not TouchFlingActive
    TouchFlingBtn.Text = TouchFlingActive and "TOUCH FLING: ON" or "TOUCH FLING: OFF"
    TouchFlingBtn.BackgroundColor3 = TouchFlingActive and Color3.fromRGB(40, 130, 80) or Color3.fromRGB(30, 30, 30)
    if TouchFlingActive then task.spawn(TouchFlingLoop) end
end)

-- COLOR PICKER UI SYSTEM (INTEGRATED)
local PickerFrame = Instance.new("Frame")
PickerFrame.Size = UDim2.new(0, 260, 0, 310)
PickerFrame.Position = UDim2.new(0.5, 180, 0.5, -155)
PickerFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
PickerFrame.BorderSizePixel = 0
PickerFrame.Visible = false
PickerFrame.Active = true
PickerFrame.Parent = ScreenGui

Instance.new("UICorner", PickerFrame).CornerRadius = UDim.new(0, 8)
local PickerStroke = Instance.new("UIStroke", PickerFrame)
PickerStroke.Thickness = 2
PickerStroke.Color = Color3.fromRGB(45, 45, 45)
PickerStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local H, S, V = 0, 1, 1
local ApplyMode = "Both"

local ModeBtnP = Instance.new("TextButton")
ModeBtnP.Size = UDim2.new(1, -20, 0, 35)
ModeBtnP.Position = UDim2.new(0, 10, 0, 10)
ModeBtnP.Text = "APPLY: BOTH"
ModeBtnP.Font = Enum.Font.GothamBold
ModeBtnP.TextSize = 14
ModeBtnP.TextColor3 = Color3.new(1,1,1)
ModeBtnP.BackgroundColor3 = Color3.fromRGB(35,35,35)
ModeBtnP.Parent = PickerFrame
Instance.new("UICorner", ModeBtnP).CornerRadius = UDim.new(0,6)

ModeBtnP.MouseButton1Click:Connect(function()
    if ApplyMode == "Both" then ApplyMode = "UI" ModeBtnP.Text = "APPLY: UI"
    elseif ApplyMode == "UI" then ApplyMode = "Chams" ModeBtnP.Text = "APPLY: CHAMS"
    else ApplyMode = "Both" ModeBtnP.Text = "APPLY: BOTH" end
end)

local HueBar = Instance.new("Frame")
HueBar.Size = UDim2.new(1, -20, 0, 20)
HueBar.Position = UDim2.new(0, 10, 0, 55)
HueBar.Parent = PickerFrame
local HueGrad = Instance.new("UIGradient", HueBar)
HueGrad.Color = ColorSequence.new{ColorSequenceKeypoint.new(0, Color3.fromHSV(0,1,1)), ColorSequenceKeypoint.new(0.167, Color3.fromHSV(0.167,1,1)), ColorSequenceKeypoint.new(0.333, Color3.fromHSV(0.333,1,1)), ColorSequenceKeypoint.new(0.5, Color3.fromHSV(0.5,1,1)), ColorSequenceKeypoint.new(0.667, Color3.fromHSV(0.667,1,1)), ColorSequenceKeypoint.new(0.833, Color3.fromHSV(0.833,1,1)), ColorSequenceKeypoint.new(1, Color3.fromHSV(1,1,1))}
local HuePointer = Instance.new("Frame")
HuePointer.Size = UDim2.new(0,2,1,4)
HuePointer.Position = UDim2.new(0,0,0,-2)
HuePointer.BackgroundColor3 = Color3.new(1,1,1)
HuePointer.Parent = HueBar

local SVContainer = Instance.new("TextButton")
SVContainer.Size = UDim2.new(1, -20, 0, 160)
SVContainer.Position = UDim2.new(0, 10, 0, 85)
SVContainer.Text = ""
SVContainer.Parent = PickerFrame
local SatFrame = Instance.new("Frame", SVContainer)
SatFrame.Size = UDim2.new(1,0,1,0)
local SatGrad = Instance.new("UIGradient", SatFrame)
SatGrad.Color = ColorSequence.new(Color3.new(1,1,1))
SatGrad.Transparency = NumberSequence.new(0,1)
local ValFrame = Instance.new("Frame", SVContainer)
ValFrame.Size = UDim2.new(1,0,1,0)
local ValGrad = Instance.new("UIGradient", ValFrame)
ValGrad.Rotation = 90
ValGrad.Color = ColorSequence.new(Color3.new(0,0,0))
ValGrad.Transparency = NumberSequence.new(1,0)
local Cursor = Instance.new("Frame", SVContainer)
Cursor.Size = UDim2.new(0,6,0,6)
Cursor.AnchorPoint = Vector2.new(0.5,0.5)
Cursor.BackgroundColor3 = Color3.new(1,1,1)
Instance.new("UICorner", Cursor)

local function ApplyColor(col)
    if ApplyMode == "UI" or ApplyMode == "Both" then
        getgenv().UI_COLOR = col
        Title.TextColor3 = col
        OpenBtn.TextColor3 = col
        MainStroke.Color = col
        OpenStroke.Color = col
        SliderFill.BackgroundColor3 = col
        PlayerSelection.ScrollBarImageColor3 = col
    end
    if ApplyMode == "Chams" or ApplyMode == "Both" then
        getgenv().CHAMS_COLOR = col
        ESP_Color = col
    end
    PickerStroke.Color = col
end

local function UpdatePicker()
    local pureHue = Color3.fromHSV(H,1,1)
    local finalCol = Color3.fromHSV(H,S,V)
    SVContainer.BackgroundColor3 = pureHue
    HuePointer.Position = UDim2.new(H,-1,0,-2)
    Cursor.Position = UDim2.new(S,0,1-V,0)
    ApplyColor(finalCol)
end

HueBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local conn
        conn = RunService.RenderStepped:Connect(function()
            if not UIS:IsMouseButtonPressed(Enum.UserInputType.MouseButton1) then conn:Disconnect() return end
            local mouse = UIS:GetMouseLocation()
            H = math.clamp((mouse.X - HueBar.AbsolutePosition.X) / HueBar.AbsoluteSize.X, 0, 1)
            UpdatePicker()
        end)
    end
end)

SVContainer.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local conn
        conn = RunService.RenderStepped:Connect(function()
            if not UIS:IsMouseButtonPressed(Enum.UserInputType.MouseButton1) then conn:Disconnect() return end
            local mouse = UIS:GetMouseLocation()
            local pos = SVContainer.AbsolutePosition
            local size = SVContainer.AbsoluteSize
            S = math.clamp((mouse.X - pos.X) / size.X, 0, 1)
            V = 1 - math.clamp((mouse.Y - (pos.Y + 36)) / size.Y, 0, 1)
            UpdatePicker()
        end)
    end
end)

ColorPickerOpenBtn.MouseButton1Click:Connect(function()
    PickerFrame.Visible = not PickerFrame.Visible
end)

UpdatePicker()

-- RAINBOW LOOP
RunService.RenderStepped:Connect(function()
    if RainbowMode then
        RainbowHue = RainbowHue + 0.005
        if RainbowHue > 1 then RainbowHue = 0 end
        ApplyColor(Color3.fromHSV(RainbowHue, 1, 1))
    end
end)

RainbowBtn.MouseButton1Click:Connect(function()
    RainbowMode = not RainbowMode
    RainbowBtn.Text = RainbowMode and "RAINBOW UI: ON" or "RAINBOW UI: OFF"
end)

-- LIST MANAGEMENT
local RefreshList = nil

-- CORE FLING EXECUTION ENGINE
local function SkidFling(TargetPlayer)
    if IsAlreadyFlung(TargetPlayer) then return end

    local Character = Player.Character
    local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
    local RootPart = Humanoid and Humanoid.RootPart
    local TCharacter = TargetPlayer.Character
    if not TCharacter then return end
    
    local THumanoid, TRootPart, THead, Accessory, Handle
    if TCharacter:FindFirstChildOfClass("Humanoid") then THumanoid = TCharacter:FindFirstChildOfClass("Humanoid") end
    if THumanoid and THumanoid.RootPart then TRootPart = THumanoid.RootPart end
    if TCharacter:FindFirstChild("Head") then THead = TCharacter.Head end
    if TCharacter:FindFirstChildOfClass("Accessory") then Accessory = TCharacter:FindFirstChildOfClass("Accessory") end
    if Accessory and Accessory:FindFirstChild("Handle") then Handle = Accessory.Handle end

    if Character and Humanoid and RootPart then
        if RootPart.Velocity.Magnitude < 50 then 
            if ReturnMode == "Original" then getgenv().OldPos = RootPart.CFrame 
            elseif ReturnMode == "Manual" and ManualPos then getgenv().OldPos = ManualPos
            elseif ReturnMode == "Target" and TRootPart then getgenv().OldPos = TRootPart.CFrame
            else getgenv().OldPos = RootPart.CFrame end
        end
        if THumanoid and THumanoid.Sit then return end
        workspace.CurrentCamera.CameraSubject = THead or Handle or (THumanoid and TRootPart)
        
        local FPos = function(BasePart, Pos, Ang)
            RootPart.CFrame = CFrame.new(BasePart.Position) * Pos * Ang
            Character:SetPrimaryPartCFrame(CFrame.new(BasePart.Position) * Pos * Ang)
            RootPart.Velocity = Vector3.new(90000, 900000, 90000)
            RootPart.RotVelocity = Vector3.new(900000, 900000, 900000)
        end
        
        local SFBasePart = function(BasePart)
            local TimeToWait = 2
            local Time = tick()
            local Angle = 0
            repeat
                if IsAlreadyFlung(TargetPlayer) then break end
                if RootPart and THumanoid then
                    if BasePart.Velocity.Magnitude < 50 then
                        Angle = Angle + 100
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle),0 ,0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, 0) + THumanoid.MoveDirection * BasePart.Velocity.Magnitude / 1.25, CFrame.Angles(math.rad(Angle), 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, 1.5, 0) + THumanoid.MoveDirection, CFrame.Angles(math.rad(Angle),0 ,0))
                        task.wait()
                    else
                        FPos(BasePart, CFrame.new(0, 1.5, THumanoid.WalkSpeed), CFrame.Angles(math.rad(90), 0, 0))
                        task.wait()
                        FPos(BasePart, CFrame.new(0, -1.5, -THumanoid.WalkSpeed), CFrame.Angles(0, 0, 0))
                        task.wait()
                    end
                end
            until Time + TimeToWait < tick() or not FlingActive
        end
        
        workspace.FallenPartsDestroyHeight = 0/0
        local BV_Ex = Instance.new("BodyVelocity", RootPart)
        BV_Ex.Velocity = Vector3.new(0, 0, 0)
        BV_Ex.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
        
        if TRootPart then SFBasePart(TRootPart)
        elseif THead then SFBasePart(THead)
        elseif Handle then SFBasePart(Handle) end
        
        BV_Ex:Destroy()
        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
        workspace.CurrentCamera.CameraSubject = Humanoid
        
        if getgenv().OldPos then
            repeat
                RootPart.CFrame = getgenv().OldPos * CFrame.new(0, .5, 0)
                Character:SetPrimaryPartCFrame(getgenv().OldPos * CFrame.new(0, .5, 0))
                Humanoid:ChangeState("GettingUp")
                for _, part in pairs(Character:GetChildren()) do
                    if part:IsA("BasePart") then part.Velocity, part.RotVelocity = Vector3.new(), Vector3.new() end
                end
                task.wait()
            until (RootPart.Position - getgenv().OldPos.p).Magnitude < 25
            workspace.FallenPartsDestroyHeight = getgenv().FPDH
        end
    end
end

-- QUEUE MANAGEMENT
local function Start()
    if FlingActive then return end
    local count = 0; for _ in pairs(SelectedTargets) do count = count + 1 end
    if count == 0 then return end
    FlingActive = true
    StatusLabel.Text = "ACTIVE: Target count " .. count
    task.spawn(function()
        while FlingActive do
            local foundTarget = false
            for name, p in pairs(SelectedTargets) do
                if not FlingActive then break end
                if p and p.Parent and p.Character then 
                    foundTarget = true
                    SkidFling(p) 
                end
            end
            if not foundTarget or getgenv().SinglePass then 
                FlingActive = false
                break 
            end
            task.wait(0.1)
        end
        FlingActive = false
        getgenv().SinglePass = false
        StatusLabel.Text = "Fling system disengaged"
    end)
end

local function Stop() 
    FlingActive = false 
    AutoFlingAllEnabled = false
    FlingAllToggleBtn.Text = "FLING ALL: OFF"
    FlingAllToggleBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    getgenv().SinglePass = false
    StatusLabel.Text = "Fling system disengaged" 
end

-- PERSISTENT SCAN LOGIC
local function ToggleFlingAll()
    AutoFlingAllEnabled = not AutoFlingAllEnabled
    if AutoFlingAllEnabled then
        FlingAllToggleBtn.Text = "FLING ALL: ON"
        FlingAllToggleBtn.BackgroundColor3 = Color3.fromRGB(40, 130, 80)
        SelectedTargets = {}
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= Player and not WhitelistedUsers[p.Name] then
                SelectedTargets[p.Name] = p
            end
        end
        getgenv().SinglePass = false
        Start()
    else
        Stop()
        SelectedTargets = {}
        RefreshList()
    end
end

FlingAllToggleBtn.MouseButton1Click:Connect(ToggleFlingAll)

-- JOINER LISTENER (PERSISTENCE)
Players.PlayerAdded:Connect(function(newPlayer)
    if AutoFlingAllEnabled then
        newPlayer.CharacterAdded:Wait()
        task.wait(1.5) 
        SelectedTargets[newPlayer.Name] = newPlayer
        if not FlingActive then Start() end
    end
end)

-- CHAT INTERFACE
local function SendChatMessage(msg)
    if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
        local channel = TextChatService.TextChannels.RBXGeneral
        channel:SendAsync(msg)
    else
        ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(msg, "All")
    end
end


UIS.InputBegan:Connect(function(input, gp)
    if SettingKey then if input.UserInputType == Enum.UserInputType.Keyboard then FlingKeybind = input.KeyCode BindBtn.Text = "KEY: " .. input.KeyCode.Name SettingKey = false end return end
    if FlySettingKey then if input.UserInputType == Enum.UserInputType.Keyboard then FlyKeybind = input.KeyCode FlyBindBtn.Text = "FLY KEY: " .. input.KeyCode.Name FlySettingKey = false end return end
    if gp then return end
    if input.KeyCode == FlingKeybind then
        if FlingActive then Stop() SelectedTargets = {} RefreshList() else
            local mouse = UIS:GetMouseLocation()
            local closest = nil local dist = 250
            for _, p in pairs(Players:GetPlayers()) do
                if p ~= Player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                    local pos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(p.Character.HumanoidRootPart.Position)
                    if onScreen then local mag = (Vector2.new(pos.X, pos.Y) - mouse).Magnitude if mag < dist then dist = mag closest = p end end
                end
            end
            if closest then SelectedTargets = {[closest.Name] = closest} Start() RefreshList() end
        end
    end
    if input.KeyCode == FlyKeybind then ToggleFly() end
    if input.KeyCode == UI_ToggleKey then MainFrame.Visible = not MainFrame.Visible end
end)

-- PLAYER LIST BUILDER
RefreshList = function()
    for _, v in pairs(PlayerSelection:GetChildren()) do if v:IsA("Frame") then v:Destroy() end end
    for _, p in pairs(Players:GetPlayers()) do
        local displayName = p.DisplayName:lower()
        local userName = p.Name:lower()
        if p ~= Player and (displayName:find(SearchText) or userName:find(SearchText)) then
            local Card = Instance.new("Frame")
            Card.Size = UDim2.new(1, -8, 0, 50)
            Card.BackgroundColor3 = SelectedTargets[p.Name] and Color3.fromRGB(40, 25, 25) or Color3.fromRGB(28, 28, 28)
            Card.BorderSizePixel = 0
            Card.Parent = PlayerSelection
            
            local CardCorner = Instance.new("UICorner", Card)
            CardCorner.CornerRadius = UDim.new(0, 6)
            
            local CardStroke = Instance.new("UIStroke", Card)
            CardStroke.Thickness = 1
            if SelectedTargets[p.Name] then
                CardStroke.Color = Color3.fromRGB(150, 0, 0)
            elseif WhitelistedUsers[p.Name] then
                CardStroke.Color = Color3.fromRGB(0, 255, 120)
            else
                CardStroke.Color = Color3.fromRGB(40, 40, 40)
            end
            
            local Thumb = Instance.new("ImageLabel")
            Thumb.Size = UDim2.new(0, 40, 0, 40)
            Thumb.Position = UDim2.new(0, 5, 0.5, -20)
            Thumb.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
            pcall(function() Thumb.Image = Players:GetUserThumbnailAsync(p.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size48x48) end)
            Thumb.Parent = Card
            Instance.new("UICorner", Thumb).CornerRadius = UDim.new(1, 0)
            
            local NameLabel = Instance.new("TextLabel")
            NameLabel.Size = UDim2.new(1, -95, 1, 0)
            NameLabel.Position = UDim2.new(0, 52, 0, 0)
            NameLabel.BackgroundTransparency = 1
            NameLabel.RichText = true
            NameLabel.TextColor3 = Color3.new(1,1,1)
            NameLabel.Font = Enum.Font.Gotham
            NameLabel.TextSize = 13
            NameLabel.TextXAlignment = Enum.TextXAlignment.Left
            NameLabel.Parent = Card
            
            if NameDisplayMode == "Both" then 
                NameLabel.Text = p.DisplayName .. "\n<font color='#AAAAAA'>@" .. p.Name .. "</font>"
            elseif NameDisplayMode == "Display" then 
                NameLabel.Text = p.DisplayName
            else 
                NameLabel.Text = "@" .. p.Name 
            end
            
            local WBtn = Instance.new("TextButton")
            WBtn.Size = UDim2.new(0, 40, 0, 30)
            WBtn.Position = UDim2.new(1, -45, 0.5, -15)
            WBtn.BackgroundColor3 = WhitelistedUsers[p.Name] and Color3.fromRGB(0, 150, 70) or Color3.fromRGB(40, 40, 40)
            WBtn.Text = "W"
            WBtn.TextColor3 = Color3.new(1,1,1)
            WBtn.Font = Enum.Font.GothamBold
            WBtn.Parent = Card
            Instance.new("UICorner", WBtn).CornerRadius = UDim.new(0, 6)

            WBtn.MouseButton1Click:Connect(function()
                if WhitelistedUsers[p.Name] then 
                    WhitelistedUsers[p.Name] = nil 
                else 
                    WhitelistedUsers[p.Name] = true 
                    -- RESTORED UI-BASED NOTIFICATION TUTORIAL (ENLARGED)
                    local TutFrame = Instance.new("Frame")
                    TutFrame.Size = UDim2.new(0, 280, 0, 140)
                    TutFrame.Position = UDim2.new(0.5, -140, 0.5, -70)
                    TutFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
                    TutFrame.Parent = ScreenGui
                    Instance.new("UICorner", TutFrame)
                    
                    local TutLabel = Instance.new("TextLabel")
                    TutLabel.Size = UDim2.new(0.9, 0, 0.6, 0)
                    TutLabel.Position = UDim2.new(0.05, 0, 0, 0)
                    TutLabel.BackgroundTransparency = 1
                    TutLabel.Text = p.DisplayName .. " has been given control over your fling script.\n\nWould you like to send a tutorial to the user?"
                    TutLabel.TextColor3 = Color3.new(1,1,1)
                    TutLabel.Font = Enum.Font.GothamBold
                    TutLabel.TextSize = 14 
                    TutLabel.TextWrapped = true
                    TutLabel.Parent = TutFrame
                    
                    local Yes = CreateButton("YES", UDim2.new(0.1, 0, 0.65, 0), UDim2.new(0.35, 0, 0.25, 0), Color3.fromRGB(40, 130, 80))
                    Yes.Parent = TutFrame
                    Yes.MouseButton1Click:Connect(function()
                        SendChatMessage("Hello " .. p.DisplayName .. "! Whitelisted. Cmds: .fling (user/all), .loopfling (user/all), .unfling, .unloopfling all.")
                        TutFrame:Destroy()
                    end)
                    
                    local No = CreateButton("NO", UDim2.new(0.55, 0, 0.65, 0), UDim2.new(0.35, 0, 0.25, 0), Color3.fromRGB(160, 40, 40))
                    No.Parent = TutFrame
                    No.MouseButton1Click:Connect(function() TutFrame:Destroy() end)
                end
                RefreshList()
            end)

            local CardClick = Instance.new("TextButton")
            CardClick.Size = UDim2.new(1, -50, 1, 0)
            CardClick.BackgroundTransparency = 1
            CardClick.Text = ""
            CardClick.Parent = Card
            CardClick.MouseButton1Click:Connect(function()
                if SelectedTargets[p.Name] then SelectedTargets[p.Name] = nil else SelectedTargets[p.Name] = p end
                RefreshList()
            end)
        end
    end
    PlayerSelection.CanvasSize = UDim2.new(0, 0, 0, ListLayout.AbsoluteContentSize.Y)
end

-- CONTROL CONNECTIONS
NameModeBtn.MouseButton1Click:Connect(function()
    if NameDisplayMode == "Both" then NameDisplayMode = "Display" NameModeBtn.Text = "NAMES: DISPLAY ONLY"
    elseif NameDisplayMode == "Display" then NameDisplayMode = "User" NameModeBtn.Text = "NAMES: USERNAME ONLY"
    else NameDisplayMode = "Both" NameModeBtn.Text = "NAMES: BOTH" end
    RefreshList()
end)

SearchBox:GetPropertyChangedSignal("Text"):Connect(function() SearchText = SearchBox.Text:lower() RefreshList() end)
StartBtn.MouseButton1Click:Connect(Start)
StopBtn.MouseButton1Click:Connect(Stop)
CloseBtn.MouseButton1Click:Connect(function() Stop() Flying = false ScreenGui:Destroy() end)
OpenBtn.MouseButton1Click:Connect(function() MainFrame.Visible = not MainFrame.Visible end)
SelectAllBtn.MouseButton1Click:Connect(function() for _, p in pairs(Players:GetPlayers()) do if p ~= Player then SelectedTargets[p.Name] = p end end RefreshList() end)
DeselectBtn.MouseButton1Click:Connect(function() SelectedTargets = {} Stop() RefreshList() end)

-- LIFECYCLE HOOKS
for _, p in pairs(Players:GetPlayers()) do 
    CreateESP(p) 
    p.Chatted:Connect(function(msg) HandleCommand(msg, p) end) 
end

Players.PlayerAdded:Connect(function(p) 
    CreateESP(p) 
    p.Chatted:Connect(function(msg) HandleCommand(msg, p) end) 
    RefreshList() 
end)

-- FINAL STARTUP
RefreshList()
-- VERIFICATION_OF_CODE_STRUCTURAL_VOLUME_AND_INTEGRITY_INDEX_941
-- End of Script. Synced for 2026 Environment Variables.
			
			
			
            -- from the very top: --[[ KILASIK'S MULTI-TARGET FLING ... to the very end

            -- IMPORTANT: add this at the VERY END of your fling code (before last comment):
            getgenv().PayamFlingLoaded = true

            -- then close task.spawn
        end)

        -- wait gui spawn
        task.wait(0.7)

        -- find the gui (your script names it "payam-hub")
        for _, g in ipairs(game:GetService("CoreGui"):GetChildren()) do
            if g:IsA("ScreenGui") and g.Name == "payam-hub" then
                flingGuiScreen = g
                flingGuiScreen.Enabled = true
                break
            end
        end
    end
})



------------------------------------------------
-- MAIN TAB INFORMATION (updated version)
------------------------------------------------
Tabs.Main:AddParagraph({
    Title = "Payam Hub - Best Free Roblox Script üî•",
    Content = [[
Yo yo whats good! My name is **Payam**  
I made this GUI **100% free ‚Äì no key ‚Äì no bullshit**

I come from somewhere far üòà  
and yeah... nigger dont talk shit saying "your gui trash"  
Payam Hub is the **bast** script for roblox right now

support delta xeno solar code x arceus x hydrogen wave and more  
its ues for hacking roblox ‚Äì give you real apower üí™

Big thanks to everyone who support me ‚Äì love you guys fr  
I well keep update this hub ‚Äì more op features coming soon

Join my community:
‚Ä¢ Discord ‚Üí https://discord.gg/3BN4rV8C
‚Ä¢ YouTube  ‚Üí https://www.youtube.com/@payamscript

Stay safe, dont get banned, have fun üî•
Payam out.
    ]]
})


------------------------------------------------
-- SETTINGS TAB (Save + Interface)
------------------------------------------------
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)

SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})

InterfaceManager:SetFolder("PayamHub")
SaveManager:SetFolder("PayamHub/Configs")

InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

------------------------------------------------
Window:SelectTab(1)

SaveManager:LoadAutoloadConfig()
